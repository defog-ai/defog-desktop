(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{13831:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return t(82822)}])},31143:function(e,o,t){"use strict";var n=t(28598),l=t(1887),r=t.n(l);o.Z=()=>(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,n.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},62429:function(e,o,t){"use strict";var n=t(28598),l=t(82684),r=t(91568),i=t(79869),s=t(34376),a=t(89971),c=t(12691),d=t.n(c);o.Z=e=>{let{id:o,userType:t,children:c}=e,{Content:u,Sider:g}=i.Layout,[h,m]=(0,l.useState)([]),[f,v]=(0,l.useContext)(r._),p=(0,s.useRouter)(),redirect=e=>{"/"===e||e.endsWith(".html")||(e+=".html"),e="/static"+e,p.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),v({user:null,token:null,userType:null}),redirect("/log-in")};return(0,l.useEffect)(()=>{m("admin"==t?[{key:"manage-database",title:"Manage Database",icon:(0,n.jsxs)("a",{onClick:()=>redirect("/extract-metadata"),children:[(0,n.jsx)("p",{className:"mr-2",children:"\uD83D\uDCBE"}),"Manage DB"]})},{key:"manage-users",title:"Manage Users",icon:(0,n.jsxs)("a",{onClick:()=>redirect("/manage-users"),children:[(0,n.jsx)("p",{className:"mr-2",children:"\uD83D\uDD10"}),"Manage Users"]})},{key:"view-notebooks",title:"View your notebook",icon:(0,n.jsxs)("a",{onClick:()=>redirect("/view-notebooks"),children:[(0,n.jsx)("p",{className:"mr-2",children:"\uD83D\uDCD2"}),"Your Notebooks"]})},{key:"manage-tools",title:"Manage tools",icon:(0,n.jsxs)("a",{onClick:()=>redirect("/manage-tools"),children:[(0,n.jsx)("p",{className:"mr-2",children:(0,n.jsx)(a.pyo,{})}),"Manage tools"]})},{key:"check-readiness",title:"Check Readiness",icon:(0,n.jsx)("a",{onClick:()=>redirect("/check-readiness"),children:(0,n.jsx)("p",{className:"mr-2",children:"✅ Check Readiness"})})},{key:"align-model",title:"Align Model",icon:(0,n.jsx)("a",{onClick:()=>redirect("/align-model"),children:(0,n.jsx)("p",{className:"mr-2",children:"⚙️ Align Model"})})},{key:"query-data",title:"Query Data",icon:(0,n.jsx)("a",{onClick:()=>redirect("/query-data"),children:(0,n.jsx)("p",{className:"mr-2",children:"\uD83D\uDD0D Query Data"})})},{key:"logout",title:"Logout",icon:(0,n.jsxs)("a",{onClick:logout,children:[(0,n.jsx)("p",{className:"mr-2",children:"↪"})," Logout"]})}]:t?[{key:"view-notebooks",title:"View your notebook",icon:(0,n.jsx)("a",{onClick:()=>redirect("/view-notebooks"),children:"Your Notebooks"})},{key:"query-data",title:"Query Data",icon:(0,n.jsx)(d(),{href:"/query-data",children:"\uD83D\uDD0D Query Data"})},{key:"logout",title:"Logout",icon:(0,n.jsx)("a",{onClick:()=>redirect("/manage-tools"),children:"Logout"})}]:[])},[t]),(0,n.jsx)(i.Layout,{style:{height:"100vh"},children:(0,n.jsxs)(u,{children:[h.length?(0,n.jsx)(g,{style:{height:"100vh",position:"fixed"},children:(0,n.jsx)(i.v2,{style:{width:200,paddingTop:"2em",paddingBottom:"2em"},mode:"inline",selectedKeys:[o],items:h})}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("div",{style:{paddingLeft:240,paddingTop:30,backgroundColor:"#f5f5f5"},children:c})]})})}},82822:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return log_in}});var n=t(28598),l=t(82684),r=t(34376),i=t(31143),s=t(62429),a=t(91568),c=t(33612),d=t(85439),u=t(20259),g=t.n(u),h=t(18953);let m=(0,l.createContext)(null);function GoogleOAuthProvider({clientId:e,nonce:o,onScriptLoadSuccess:t,onScriptLoadError:n,children:r}){let i=function(e={}){let{nonce:o,onScriptLoadSuccess:t,onScriptLoadError:n}=e,[r,i]=(0,l.useState)(!1),s=(0,l.useRef)(t);s.current=t;let a=(0,l.useRef)(n);return a.current=n,(0,l.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=o,e.onload=()=>{var e;i(!0),null===(e=s.current)||void 0===e||e.call(s)},e.onerror=()=>{var e;i(!1),null===(e=a.current)||void 0===e||e.call(a)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[o]),r}({nonce:o,onScriptLoadSuccess:t,onScriptLoadError:n}),s=(0,l.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:i}),[e,i]);return l.createElement(m.Provider,{value:s},r)}let f={large:40,medium:32,small:20};function GoogleLogin({onSuccess:e,onError:o,useOneTap:t,promptMomentNotification:n,type:r="standard",theme:i="outline",size:s="large",text:a,shape:c,logo_alignment:d,width:u,locale:g,click_listener:h,containerProps:v,...p}){let y=(0,l.useRef)(null),{clientId:x,scriptLoadedSuccessfully:k}=function(){let e=(0,l.useContext)(m);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),j=(0,l.useRef)(e);j.current=e;let w=(0,l.useRef)(o);w.current=o;let D=(0,l.useRef)(n);return D.current=n,(0,l.useEffect)(()=>{var e,o,n,l,m,f,v,_,C;if(k)return null===(n=null===(o=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===o?void 0:o.id)||void 0===n||n.initialize({client_id:x,callback:e=>{var o;if(!(null==e?void 0:e.credential))return null===(o=w.current)||void 0===o?void 0:o.call(w);let{credential:t,select_by:n}=e;j.current({credential:t,clientId:function(e){var o;let t=null!==(o=null==e?void 0:e.clientId)&&void 0!==o?o:null==e?void 0:e.client_id;return t}(e),select_by:n})},...p}),null===(f=null===(m=null===(l=null==window?void 0:window.google)||void 0===l?void 0:l.accounts)||void 0===m?void 0:m.id)||void 0===f||f.renderButton(y.current,{type:r,theme:i,size:s,text:a,shape:c,logo_alignment:d,width:u,locale:g,click_listener:h}),t&&(null===(C=null===(_=null===(v=null==window?void 0:window.google)||void 0===v?void 0:v.accounts)||void 0===_?void 0:_.id)||void 0===C||C.prompt(D.current)),()=>{var e,o,n;t&&(null===(n=null===(o=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===o?void 0:o.id)||void 0===n||n.cancel())}},[x,k,t,r,i,s,a,c,d,u,g]),l.createElement("div",{...v,ref:y,style:{height:f[s],...null==v?void 0:v.style}})}var v=t(63509),p=t(79204),common_GoogleLogin=()=>{let[e,o]=(0,l.useContext)(a._),t=(0,r.useRouter)(),onSuccess=async e=>{console.log("Login Success: ",e);let n=await fetch((0,p.Z)("http","login_google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e.credential})});if(n.ok){let e=await n.json();e.error&&(console.error(e.error),h.default.error(e.error)),"success"===e.status&&(o({user:e.user_email,token:e.token,userType:e.user_type}),localStorage.setItem("defogUser",e.user_email),localStorage.setItem("defogToken",e.token),localStorage.setItem("defogUserType",e.user_type),t.push("/"))}};return(0,n.jsx)("div",{children:(0,n.jsx)(GoogleOAuthProvider,{clientId:"31105075861-esd2mv6ntg5q3asfd5b0f85hl1b4lf0i.apps.googleusercontent.com",children:(0,n.jsx)(GoogleLogin,{buttonText:"Log In with Google",onSuccess:onSuccess,onFailure:e=>{console.error("Login Failed: ",e),v.default},cookiePolicy:"single_host_origin"})})})},log_in=()=>{let[e,o]=(0,l.useContext)(a._),t=(0,r.useRouter)();console.log("test");let redirect=e=>{"/"===e||e.endsWith(".html")||(e+=".html"),e="/static"+e,t.push(e)},handleLogin=async e=>{console.log("test");let t=await fetch("http://localhost:33364/login",{method:"POST",body:JSON.stringify(e)}),n=await t.json();"success"===n.status?(o({user:e.username,token:n.token,userType:n.user_type}),localStorage.setItem("defogUser",e.username),localStorage.setItem("defogToken",n.token),localStorage.setItem("defogUserType",n.user_type),redirect("/")):h.default.error("Login failed. Please contact your administrator.")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)("h1",{style:{paddingBottom:"1em"},children:"Welcome to Defog!"}),(0,n.jsxs)(d.default,{labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:800},onFinish:handleLogin,children:[(0,n.jsx)(d.default.Item,{label:"Username",name:"username",children:(0,n.jsx)(c.default,{})}),(0,n.jsx)(d.default.Item,{label:"Password",name:"password",children:(0,n.jsx)(c.default.Password,{})}),(0,n.jsx)(d.default.Item,{children:(0,n.jsx)(g(),{type:"primary",htmlType:"submit",children:"Log In"})})]}),(0,n.jsx)(common_GoogleLogin,{})]})]})}},79204:function(e,o){"use strict";o.Z=(e,o)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==o?"ws"===e?"".concat("http://localhost:33364".replace("http","ws"),"/").concat(o):"".concat("http://localhost:33364","/").concat(o):"".concat("http://localhost:33364")}}},function(e){e.O(0,[665,958,664,774,888,179],function(){return e(e.s=13831)}),_N_E=e.O()}]);