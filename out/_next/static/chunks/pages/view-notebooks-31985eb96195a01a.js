(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{84308:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-notebooks",function(){return s(91508)}])},26335:function(e,t,s){"use strict";var a=s(28598),o=s(1887),r=s.n(o);t.Z=()=>(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},82067:function(e,t,s){"use strict";var a=s(28598),o=s(82684),r=s(97574),i=s(79869),c=s(34376);s(12691);var n=s(26978),l=s(47663),d=s(56572);t.Z=e=>{let{id:t,userType:s,children:u,rootClassNames:m="",contentClassNames:h=""}=e,{Content:f,Sider:g}=i.Layout,[v,p]=(0,o.useState)([]),[y,x]=(0,o.useContext)(r.S),k=(0,c.useRouter)(),redirect=e=>{k.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),x({user:null,token:null,userType:null}),redirect("/static/log-in.html")},_=(0,l.usePathname)();(0,o.useEffect)(()=>{p(("admin"==s?[{key:"manage-database",title:"Manage Database",href:"/static/extract-metadata.html"},{key:"manage-users",title:"Manage Users",href:"/static/manage-users.html"},{key:"manage-tools",title:"Manage tools",href:"/static/manage-tools.html"},{key:"check-readiness",title:"Check Readiness",href:"/static/check-readiness.html"},{key:"align-model",title:"Align Model",href:"/static/align-model.html"},{key:"view-feedback",title:"View Feedback",href:"/static/view-feedback.html"},{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:s?[{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:[]).map(e=>(e.current=e.href==_,e)))},[s]);let[N,j]=(0,o.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,o.useEffect)(()=>{"/query-data"===_&&j("flex flex-col md:min-h-screen relative")},[_]),(0,a.jsxs)("div",{className:(0,d.m6)(N,m),children:[v.length?(0,a.jsx)(n.l2,{rootClassNames:"border-b",items:v}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:(0,d.m6)("grow",h),children:u})]})}},91508:function(e,t,s){"use strict";s.r(t);var a=s(28598),o=s(82684),r=s(26335),i=s(54186),c=s(18953),n=s(34376),l=s(79204),d=s(82067),u=s(97574);t.default=()=>{let[e,t]=(0,o.useState)(!1),[s,m]=(0,o.useContext)(u.S),[h,f]=(0,o.useState)([]),[g,v]=(0,o.useState)([]),[p,y]=(0,o.useState)([]),x=(0,n.useRouter)();async function archiveToggle(e){let t=e.doc_id,s=e.archived,a=p,o=h;s?(a=p.filter(e=>e.doc_id!==t),o=[...h,...p.filter(e=>e.doc_id===t).map(e=>(e.archived=!1,e))]):(a=[...p,...h.filter(e=>e.doc_id===t).map(e=>(e.archived=!0,e))],o=h.filter(e=>e.doc_id!==t)),y(a),f(o);let r=await fetch((0,l.Z)("http","toggle_archive_status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_id:t,archive_status:!s})});(r=await r.json()).success&&c.default.success("Successfully ".concat(s?"un":"","archived doc")),r.success||c.default.error("Error ".concat(s?"un":"","archiving doc"))}let getNotebooks=async()=>{if(!s.token)return;let e=await fetch((0,l.Z)("http","get_docs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s.token})});if((e=await e.json()).success){let t=e.docs,a=e.recently_viewed_docs||[];t.forEach(e=>{e.timestamp=new Date(e.timestamp)}),a=a.map(e=>({...e,timestamp:new Date(e.timestamp),created_by:e.username===s.user?"You":e.username})),t.sort((e,t)=>t.timestamp-e.timestamp),v(a),a.sort((e,t)=>t.timestamp-e.timestamp);let o=t.filter(e=>e.archived);t=t.filter(e=>!e.archived),y(o),f(t)}if(!e.success)throw Error(e.error_message);t(!1)};return(0,o.useEffect)(()=>{t(!0);let e=s.token,a=s.userType;if(!a){let t=localStorage.getItem("defogUser");if(e=localStorage.getItem("defogToken"),a=localStorage.getItem("defogUserType"),!t||!e||!a){x.push("/log-in");return}m({user:t,token:e,userType:a})}e?getNotebooks():x.push("/log-in")},[s,s.token]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)(d.Z,{id:"view-notebooks",userType:s.userType,children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Notebooks"}),(0,a.jsx)("h2",{className:"text-lg mb-4",children:"Your notebooks"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-start",children:h&&!e?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{children:"Loading docs..."})}),g.length?(0,a.jsx)("h2",{className:"text-lg mb-4",children:"Recently viewed"}):null,(0,a.jsx)("div",{className:"flex flex-wrap justify-start",children:g&&!e?(0,a.jsx)(a.Fragment,{children:g.map(e=>(0,a.jsx)(DocIcon,{doc:e,onClick:archiveToggle,recentlyViewed:!0},e.doc_id))}):(0,a.jsx)("div",{children:"Loading recently viewed docs..."})}),0===p.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.default,{bordered:!1,size:"small",rootClassName:"archived-collapse",items:[{label:"Archived notebooks",key:"archived-docs",children:(0,a.jsx)("div",{className:"doc-icons-container",children:p.map(e=>(0,a.jsx)(DocIcon,{doc:e,onClick:archiveToggle},e.doc_id))})}]})})]})]})}},79204:function(e,t,s){"use strict";var a=s(48497);t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT),""!==t)?"ws"===e?"".concat((a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(t):"".concat(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(t):"".concat(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}}},function(e){e.O(0,[435,774,888,179],function(){return e(e.s=84308)}),_N_E=e.O()}]);