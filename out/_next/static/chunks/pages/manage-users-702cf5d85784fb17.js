(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{4139:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-users",function(){return s(78977)}])},31143:function(e,t,s){"use strict";var a=s(28598),n=s(1887),r=s.n(n);t.Z=()=>(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},62429:function(e,t,s){"use strict";var a=s(28598),n=s(82684),r=s(91568),o=s(79869),i=s(34376),l=s(89971),d=s(12691),c=s.n(d);t.Z=e=>{let{id:t,userType:s,children:d}=e,{Content:u,Sider:h}=o.Layout,[g,m]=(0,n.useState)([]),[y,p]=(0,n.useContext)(r._),f=(0,i.useRouter)(),redirect=e=>{"/"===e||e.endsWith(".html")||(e+=".html"),e="/static"+e,f.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),p({user:null,token:null,userType:null}),redirect("/log-in")};return(0,n.useEffect)(()=>{m("admin"==s?[{key:"manage-database",title:"Manage Database",icon:(0,a.jsxs)("a",{onClick:()=>redirect("/extract-metadata"),children:[(0,a.jsx)("p",{className:"mr-2",children:"\uD83D\uDCBE"}),"Manage DB"]})},{key:"manage-users",title:"Manage Users",icon:(0,a.jsxs)("a",{onClick:()=>redirect("/manage-users"),children:[(0,a.jsx)("p",{className:"mr-2",children:"\uD83D\uDD10"}),"Manage Users"]})},{key:"view-notebooks",title:"View your notebook",icon:(0,a.jsxs)("a",{onClick:()=>redirect("/view-notebooks"),children:[(0,a.jsx)("p",{className:"mr-2",children:"\uD83D\uDCD2"}),"Your Notebooks"]})},{key:"manage-tools",title:"Manage tools",icon:(0,a.jsxs)("a",{onClick:()=>redirect("/manage-tools"),children:[(0,a.jsx)("p",{className:"mr-2",children:(0,a.jsx)(l.pyo,{})}),"Manage tools"]})},{key:"check-readiness",title:"Check Readiness",icon:(0,a.jsx)("a",{onClick:()=>redirect("/check-readiness"),children:(0,a.jsx)("p",{className:"mr-2",children:"✅ Check Readiness"})})},{key:"align-model",title:"Align Model",icon:(0,a.jsx)("a",{onClick:()=>redirect("/align-model"),children:(0,a.jsx)("p",{className:"mr-2",children:"⚙️ Align Model"})})},{key:"query-data",title:"Query Data",icon:(0,a.jsx)("a",{onClick:()=>redirect("/query-data"),children:(0,a.jsx)("p",{className:"mr-2",children:"\uD83D\uDD0D Query Data"})})},{key:"logout",title:"Logout",icon:(0,a.jsxs)("a",{onClick:logout,children:[(0,a.jsx)("p",{className:"mr-2",children:"↪"})," Logout"]})}]:s?[{key:"view-notebooks",title:"View your notebook",icon:(0,a.jsx)("a",{onClick:()=>redirect("/view-notebooks"),children:"Your Notebooks"})},{key:"query-data",title:"Query Data",icon:(0,a.jsx)(c(),{href:"/query-data",children:"\uD83D\uDD0D Query Data"})},{key:"logout",title:"Logout",icon:(0,a.jsx)("a",{onClick:()=>redirect("/manage-tools"),children:"Logout"})}]:[])},[s]),(0,a.jsx)(o.Layout,{style:{height:"100vh"},children:(0,a.jsxs)(u,{children:[g.length?(0,a.jsx)(h,{style:{height:"100vh",position:"fixed"},children:(0,a.jsx)(o.v2,{style:{width:200,paddingTop:"2em",paddingBottom:"2em"},mode:"inline",selectedKeys:[t],items:g})}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{style:{paddingLeft:240,paddingTop:30,backgroundColor:"#f5f5f5"},children:d})]})})}},78977:function(e,t,s){"use strict";s.r(t);var a=s(28598),n=s(82684),r=s(34376),o=s(91568),i=s(31143),l=s(62429),d=s(37490),c=s(92696),u=s(85439),h=s(33612),g=s(10998),m=s(20259),y=s.n(m),p=s(35575),f=s(18953),x=s(79204);t.default=()=>{let[e,t]=(0,n.useState)(!1),[s,m]=(0,n.useState)([]),[k,j]=(0,n.useContext)(o._),D=(0,r.useRouter)(),getUserDets=async()=>{if(!k.token)return;let e=await fetch((0,x.Z)("http","admin/get_users"),{method:"POST",body:JSON.stringify({token:k.token}),headers:{"Content-Type":"application/json"}}),t=await e.json();t.users?m(t.users):f.default.error("There was an error fetching the user data. Please try again.")};return(0,n.useEffect)(()=>{let e=k.token,t=k.userType;if(!t){let s=localStorage.getItem("defogUser");if(e=localStorage.getItem("defogToken"),t=localStorage.getItem("defogUserType"),!s||!e||!t){D.push("/log-in");return}j({user:s,token:e,userType:t})}e?getUserDets():D.push("/log-in")},[k,k.token]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{}),(0,a.jsxs)(l.Z,{id:"manage-users",userType:"admin",children:[(0,a.jsx)("h1",{children:"Add New Users"}),(0,a.jsxs)(d.default,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsxs)(c.default,{span:{xs:24,md:12},children:[(0,a.jsx)("h2",{children:"Add Users"}),(0,a.jsx)("p",{children:"Paste in user details as a CSV file with the headers: `username,password,user_type`"}),(0,a.jsxs)(u.default,{name:"add-users",disabled:e,onFinish:async e=>{t(!0);let s=await fetch((0,x.Z)("http","admin/add_users"),{method:"POST",body:JSON.stringify({...e,token:k.token}),headers:{"Content-Type":"application/json"}}),a=await s.json();"success"===a.status?f.default.success("Users added successfully! Refreshing the user data..."):f.default.error("There was an error adding the users. Please try again."),await getUserDets(),t(!1)},children:[(0,a.jsx)(u.default.Item,{label:"Google Sheets URL",name:"gsheets_url",children:(0,a.jsx)(h.default,{})}),(0,a.jsx)(u.default.Item,{children:(0,a.jsx)(y(),{type:"primary",htmlType:"submit",children:"Add Users"})})]})]}),(0,a.jsxs)(c.default,{span:{xs:24,md:12},children:[(0,a.jsx)("h2",{children:"Users"}),(0,a.jsx)(g.default,{dataSource:s,columns:[{title:"User ID",dataIndex:"username",key:"username"},{title:"User Type",dataIndex:"user_type",key:"user_type"},{title:"Delete User",key:"delete_user",render:(e,s)=>(0,a.jsx)(p.default,{size:"middle",children:(0,a.jsx)("a",{onClick:async()=>{t(!0);let e=await fetch((0,x.Z)("http","admin/delete_user"),{method:"POST",body:JSON.stringify({username:s.username,token:k.token}),headers:{"Content-Type":"application/json"}}),a=await e.json();"success"===a.status?f.default.success("User deleted successfully! Refreshing the user data..."):f.default.error("There was an error deleting the user. Please try again."),await getUserDets(),t(!1)},children:"Delete"})})}]})]})]})]})]})}},79204:function(e,t){"use strict";t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==t?"ws"===e?"".concat("http://localhost:33364".replace("http","ws"),"/").concat(t):"".concat("http://localhost:33364","/").concat(t):"".concat("http://localhost:33364")}}},function(e){e.O(0,[665,958,664,774,888,179],function(){return e(e.s=4139)}),_N_E=e.O()}]);