(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{95092:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(65260),o=n(82684),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},i=n(92902),s=o.forwardRef(function(e,t){return o.createElement(i.Z,(0,a.Z)({},e,{ref:t,icon:r}))})},84308:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-notebooks",function(){return n(43259)}])},42449:function(e,t,n){"use strict";var a=n(28598),o=n(1887),r=n.n(o);let i=()=>(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]});t.Z=i},22500:function(e,t,n){"use strict";var a=n(28598),o=n(82684),r=n(36189),i=n(79869),s=n(34376);n(12691);var l=n(26978),d=n(47663),c=n(56572);let u=e=>{let{id:t,userType:n,children:u,rootClassNames:m="",contentClassNames:p=""}=e,{Content:g,Sider:h}=i.Ar,[f,b]=(0,o.useState)([]),[$,x]=(0,o.useContext)(r.S),v=(0,s.useRouter)(),y=e=>{v.push(e)},k=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),x({user:null,token:null,userType:null}),y("/log-in")},w=(0,d.usePathname)();(0,o.useEffect)(()=>{b(("admin"==n?[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"manage-users",title:"Manage Users",href:"/manage-users"},{key:"manage-tools",title:"Manage tools",href:"/manage-tools"},{key:"check-readiness",title:"Check Readiness",href:"/check-readiness"},{key:"align-model",title:"Align Model",href:"/align-model"},{key:"view-feedback",title:"View Feedback",href:"/view-feedback"},{key:"query-data",title:"Query Data",href:"/query-data"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:k}]:n?[{key:"view-notebooks",title:"View your notebook",href:"/view-notebooks"},{key:"query-data",title:"Query Data",href:"/query-data"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:k}]:[]).map(e=>(e.current=e.href==w,e)))},[n]);let[j,S]=(0,o.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,o.useEffect)(()=>{"/query-data"===w&&S("flex flex-col md:min-h-screen relative")},[w]),(0,a.jsxs)("div",{className:(0,c.m6)(j,m),children:[f.length?(0,a.jsx)(l.l2,{rootClassNames:"border-b",items:f}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:(0,c.m6)("grow",p),children:u})]})};t.Z=u},43259:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var a=n(28598),o=n(82684),r=n(42449),i=n(16496),s=n(95092),l=n(68925),d=n.n(l),c=n(61957),u=n(93550),m=n(85401),p=n(19405),g=n(81730),h=n(94980),f=n(27011);let b=o.forwardRef((e,t)=>{let{getPrefixCls:n}=o.useContext(h.E_),{prefixCls:a,className:r,showArrow:i=!0}=e,s=n("collapse",a),l=d()({[`${s}-no-arrow`]:!i},r);return o.createElement(c.default.Panel,Object.assign({ref:t},e,{prefixCls:s,className:l}))});var $=n(20922),x=n(31875),v=n(60328),y=n(18511),k=n(89158);let w=e=>{let{componentCls:t,contentBg:n,padding:a,headerBg:o,headerPadding:r,collapseHeaderPaddingSM:i,collapseHeaderPaddingLG:s,collapsePanelBorderRadius:l,lineWidth:d,lineType:c,colorBorder:u,colorText:m,colorTextHeading:p,colorTextDisabled:g,fontSizeLG:h,lineHeight:f,lineHeightLG:b,marginSM:v,paddingSM:y,paddingLG:k,paddingXS:w,motionDurationSlow:j,fontSizeIcon:S,contentPadding:C,fontHeight:_,fontHeightLG:N}=e,I=`${(0,$.unit)(d)} ${c} ${u}`;return{[t]:Object.assign(Object.assign({},(0,x.Wf)(e)),{backgroundColor:o,border:I,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:I,"&:last-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`0 0 ${(0,$.unit)(l)} ${(0,$.unit)(l)}`}},[`> ${t}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:r,color:p,lineHeight:f,cursor:"pointer",transition:`all ${j}, visibility 0s`,[`> ${t}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${t}-expand-icon`]:{height:_,display:"flex",alignItems:"center",paddingInlineEnd:v},[`${t}-arrow`]:Object.assign(Object.assign({},(0,x.Ro)()),{fontSize:S,transition:`transform ${j}`,svg:{transition:`transform ${j}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}},[`${t}-icon-collapsible-only`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:m,backgroundColor:n,borderTop:I,[`& > ${t}-content-box`]:{padding:C},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:i,paddingInlineStart:w,[`> ${t}-expand-icon`]:{marginInlineStart:e.calc(y).sub(w).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:y}}},"&-large":{[`> ${t}-item`]:{fontSize:h,lineHeight:b,[`> ${t}-header`]:{padding:s,paddingInlineStart:a,[`> ${t}-expand-icon`]:{height:N,marginInlineStart:e.calc(k).sub(a).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:k}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${(0,$.unit)(l)} ${(0,$.unit)(l)}`}},[`& ${t}-item-disabled > ${t}-header`]:{[`
          &,
          & > .arrow
        `]:{color:g,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:v}}}}})}},j=e=>{let{componentCls:t}=e,n=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[n]:{transform:"rotate(180deg)"}}}},S=e=>{let{componentCls:t,headerBg:n,paddingXXS:a,colorBorder:o}=e;return{[`${t}-borderless`]:{backgroundColor:n,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${o}`},[`
        > ${t}-item:last-child,
        > ${t}-item:last-child ${t}-header
      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{paddingTop:a}}}},C=e=>{let{componentCls:t,paddingSM:n}=e;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:n}}}}}},_=e=>({headerPadding:`${e.paddingSM}px ${e.padding}px`,headerBg:e.colorFillAlter,contentPadding:`${e.padding}px 16px`,contentBg:e.colorBgContainer});var N=(0,y.I$)("Collapse",e=>{let t=(0,k.mergeToken)(e,{collapseHeaderPaddingSM:`${(0,$.unit)(e.paddingXS)} ${(0,$.unit)(e.paddingSM)}`,collapseHeaderPaddingLG:`${(0,$.unit)(e.padding)} ${(0,$.unit)(e.paddingLG)}`,collapsePanelBorderRadius:e.borderRadiusLG});return[w(t),S(t),C(t),j(t),(0,v.Z)(t)]},_);let I=o.forwardRef((e,t)=>{let{getPrefixCls:n,direction:a,collapse:r}=o.useContext(h.E_),{prefixCls:i,className:l,rootClassName:b,style:$,bordered:x=!0,ghost:v,size:y,expandIconPosition:k="start",children:w,expandIcon:j}=e,S=(0,f.Z)(e=>{var t;return null!==(t=null!=y?y:e)&&void 0!==t?t:"middle"}),C=n("collapse",i),_=n(),[I,T,E]=N(C),O=o.useMemo(()=>"left"===k?"start":"right"===k?"end":k,[k]),Z=null!=j?j:null==r?void 0:r.expandIcon,P=o.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="function"==typeof Z?Z(e):o.createElement(s.Z,{rotate:e.isActive?90:void 0,"aria-label":e.isActive?"expanded":"collapsed"});return(0,g.Tm)(t,()=>{var e;return{className:d()(null===(e=null==t?void 0:t.props)||void 0===e?void 0:e.className,`${C}-arrow`)}})},[Z,C]),R=d()(`${C}-icon-position-${O}`,{[`${C}-borderless`]:!x,[`${C}-rtl`]:"rtl"===a,[`${C}-ghost`]:!!v,[`${C}-${S}`]:"middle"!==S},null==r?void 0:r.className,l,b,T,E),A=Object.assign(Object.assign({},(0,p.Z)(_)),{motionAppear:!1,leavedClassName:`${C}-content-hidden`}),B=o.useMemo(()=>w?(0,u.Z)(w).map((e,t)=>{var n,a;if(null===(n=e.props)||void 0===n?void 0:n.disabled){let o=null!==(a=e.key)&&void 0!==a?a:String(t),{disabled:r,collapsible:i}=e.props,s=Object.assign(Object.assign({},(0,m.Z)(e.props,["disabled"])),{key:o,collapsible:null!=i?i:r?"disabled":void 0});return(0,g.Tm)(e,s)}return e}):null,[w]);return I(o.createElement(c.default,Object.assign({ref:t,openMotion:A},(0,m.Z)(e,["rootClassName"]),{expandIcon:P,prefixCls:C,className:R,style:Object.assign(Object.assign({},null==r?void 0:r.style),$)}),B))});var T=Object.assign(I,{Panel:b}),E=n(34376),O=n(93146),Z=n(22500),P=n(36189);let R=()=>{let[e,t]=(0,o.useState)(!1),[n,s]=(0,o.useContext)(P.S),[l,d]=(0,o.useState)([]),[c,u]=(0,o.useState)([]),[m,p]=(0,o.useState)([]),g=(0,E.useRouter)();async function h(e){let t=e.doc_id,n=e.archived,a=m,o=l;n?(a=m.filter(e=>e.doc_id!==t),o=[...l,...m.filter(e=>e.doc_id===t).map(e=>(e.archived=!1,e))]):(a=[...m,...l.filter(e=>e.doc_id===t).map(e=>(e.archived=!0,e))],o=l.filter(e=>e.doc_id!==t)),p(a),d(o);let r=await fetch((0,O.Z)("http","toggle_archive_status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_id:t,archive_status:!n})});(r=await r.json()).success&&i.ZP.success("Successfully ".concat(n?"un":"","archived doc")),r.success||i.ZP.error("Error ".concat(n?"un":"","archiving doc"))}let f=async()=>{if(!n.token)return;let e=await fetch((0,O.Z)("http","get_docs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n.token})});if((e=await e.json()).success){let a=e.docs,o=e.recently_viewed_docs||[];a.forEach(e=>{e.timestamp=new Date(e.timestamp)}),o=o.map(e=>({...e,timestamp:new Date(e.timestamp),created_by:e.username===n.user?"You":e.username})),a.sort((e,t)=>t.timestamp-e.timestamp),u(o),o.sort((e,t)=>t.timestamp-e.timestamp);let r=a.filter(e=>e.archived);a=a.filter(e=>!e.archived),p(r),d(a)}if(!e.success)throw Error(e.error_message);t(!1)};return(0,o.useEffect)(()=>{t(!0);let e=n.token,a=n.userType;if(!a){let o=localStorage.getItem("defogUser");if(e=localStorage.getItem("defogToken"),a=localStorage.getItem("defogUserType"),!o||!e||!a){g.push("/log-in");return}s({user:o,token:e,userType:a})}e?f():g.push("/log-in")},[n,n.token]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)(Z.Z,{id:"view-notebooks",userType:n.userType,children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Notebooks"}),(0,a.jsx)("h2",{className:"text-lg mb-4",children:"Your notebooks"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-start",children:l&&!e?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{children:"Loading docs..."})}),c.length?(0,a.jsx)("h2",{className:"text-lg mb-4",children:"Recently viewed"}):null,(0,a.jsx)("div",{className:"flex flex-wrap justify-start",children:c&&!e?(0,a.jsx)(a.Fragment,{children:c.map(e=>(0,a.jsx)(DocIcon,{doc:e,onClick:h,recentlyViewed:!0},e.doc_id))}):(0,a.jsx)("div",{children:"Loading recently viewed docs..."})}),0===m.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T,{bordered:!1,size:"small",rootClassName:"archived-collapse",items:[{label:"Archived notebooks",key:"archived-docs",children:(0,a.jsx)("div",{className:"doc-icons-container",children:m.map(e=>(0,a.jsx)(DocIcon,{doc:e,onClick:h},e.doc_id))})}]})})]})]})};var A=R},93146:function(e,t){"use strict";let n=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log("http://localhost"),""!==t)?"ws"===e?"".concat("http://localhost".replace("http","ws"),"/").concat(t):"".concat("http://localhost","/").concat(t):"".concat("http://localhost")};t.Z=n}},function(e){e.O(0,[435,919,412,774,888,179],function(){return e(e.s=84308)}),_N_E=e.O()}]);