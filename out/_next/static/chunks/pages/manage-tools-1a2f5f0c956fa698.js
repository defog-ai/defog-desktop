(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{91012:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-tools",function(){return a(31988)}])},42449:function(e,t,a){"use strict";var l=a(28598),o=a(1887),s=a.n(o);let n=()=>(0,l.jsxs)(s(),{children:[(0,l.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,l.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]});t.Z=n},22500:function(e,t,a){"use strict";var l=a(28598),o=a(82684),s=a(36189),n=a(79869),r=a(34376);a(12691);var i=a(26978),d=a(47663),c=a(56572);let u=e=>{let{id:t,userType:a,children:u,rootClassNames:m="",contentClassNames:h=""}=e,{Content:x,Sider:f}=n.Ar,[g,j]=(0,o.useState)([]),[p,b]=(0,o.useContext)(s.S),v=(0,r.useRouter)(),y=e=>{v.push(e)},w=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),b({user:null,token:null,userType:null}),y("/log-in")},N=(0,d.usePathname)();(0,o.useEffect)(()=>{j(("admin"==a?[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"manage-users",title:"Manage Users",href:"/manage-users"},{key:"manage-tools",title:"Manage tools",href:"/manage-tools"},{key:"check-readiness",title:"Check Readiness",href:"/check-readiness"},{key:"align-model",title:"Align Model",href:"/align-model"},{key:"view-feedback",title:"View Feedback",href:"/view-feedback"},{key:"query-data",title:"Query Data",href:"/query-data"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:w}]:a?[{key:"view-notebooks",title:"View your notebook",href:"/view-notebooks"},{key:"query-data",title:"Query Data",href:"/query-data"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:w}]:[]).map(e=>(e.current=e.href==N,e)))},[a]);let[C,_]=(0,o.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,o.useEffect)(()=>{"/query-data"===N&&_("flex flex-col md:min-h-screen relative")},[N]),(0,l.jsxs)("div",{className:(0,c.m6)(C,m),children:[g.length?(0,l.jsx)(i.l2,{rootClassNames:"border-b",items:g}):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)("div",{className:(0,c.m6)("grow",h),children:u})]})};t.Z=u},31988:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var l=a(28598),o=a(42449),s=a(22500),n=a(93146);let r={cancer_survival:"Cancer Survival",data_fetching:"Data Fetching",plots:"Plots",stats:"Stats"},i=(0,n.Z)("http","add_tool"),d=async e=>{let{tool_name:t,function_name:a,description:l,code:o,input_metadata:s,output_metadata:n,toolbox:r,no_code:d=!1}=e;try{let c=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:t,function_name:a,description:l,code:o,input_metadata:s,output_metadata:n,toolbox:r,no_code:d})});if(!c.ok)throw Error("Failed to add tool");let u=await c.json();return u}catch(m){return console.error(m),{success:!1,error_message:m}}};var c=a(82684),u=a(26978),m=a(83418),h=a(80030),x=a(30016),f=a(82431);let g=c.forwardRef(function({title:e,titleId:t,...a},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fillRule:"evenodd",d:"M4.25 2A2.25 2.25 0 0 0 2 4.25v11.5A2.25 2.25 0 0 0 4.25 18h11.5A2.25 2.25 0 0 0 18 15.75V4.25A2.25 2.25 0 0 0 15.75 2H4.25Zm4.03 6.28a.75.75 0 0 0-1.06-1.06L4.97 9.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 0 0 1.06-1.06L6.56 10l1.72-1.72Zm4.5-1.06a.75.75 0 1 0-1.06 1.06L13.44 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06l2.25-2.25a.75.75 0 0 0 0-1.06l-2.25-2.25Z",clipRule:"evenodd"}))}),j=c.forwardRef(function({title:e,titleId:t,...a},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fillRule:"evenodd",d:"M1 5.25A2.25 2.25 0 0 1 3.25 3h13.5A2.25 2.25 0 0 1 19 5.25v9.5A2.25 2.25 0 0 1 16.75 17H3.25A2.25 2.25 0 0 1 1 14.75v-9.5Zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75v-2.69l-2.22-2.219a.75.75 0 0 0-1.06 0l-1.91 1.909.47.47a.75.75 0 1 1-1.06 1.06L6.53 8.091a.75.75 0 0 0-1.06 0l-2.97 2.97ZM12 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))}),p=c.forwardRef(function({title:e,titleId:t,...a},l){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785l-.238-1.192ZM6.949 5.684a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633L6.95 5.684ZM13.949 13.684a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632l-.183-.551Z"}))});function b({input:e,name:t=null,onClick:a=(...e)=>{},isTable:l=!1,isImage:o=!1}){return m.j.jsxs(m.j.Fragment,{children:[m.j.jsx("div",{className:"text-sm rounded-t-md font-semibold text-gray-900 p-1 bg-gray-100 mb-1",children:t||e.name}),m.j.jsx("div",{className:"p-1 grow",children:l?m.j.jsx("div",{className:"p-2 bg-blue-50 h-full hover:bg-blue-100 group shadow-inner grid grid-cols-4 gap-1 grid-rows-2 rounded-md border-gray-100 cursor-pointer",onClick:()=>a(e),children:(0,h.r)(0,8).map((e,t)=>m.j.jsx("div",{className:"bg-blue-100 group-hover:bg-blue-200"},t))}):o?m.j.jsx("div",{className:"h-full",children:m.j.jsx(j,{onClick:()=>a(e),className:"w-full text-blue-50 cursor-pointer hover:text-blue-200"})}):m.j.jsx("div",{className:"px-1",children:m.j.jsx("div",{className:"text-sm text-gray-500",children:e.value+""})})})]})}function v({toolCode:e,className:t="",editable:a=!1,onChange:l=(...e)=>{}}){let o=(0,c.useRef)(null);return m.j.jsx(x.R,{ref:o,className:(0,m.t)("*:outline-0 *:focus:outline-0",t),value:e,editable:a,extensions:[(0,x.p)(),x.l.lineWrapping],onChange:e=>{l(e)},basicSetup:{lineNumbers:!1,highlightActiveLine:!1}})}function y({toolName:e,testingResults:t,code:a,handleCodeChange:l=(...e)=>{},showCode:o=!0}){let s=(0,c.useRef)(null),n=(0,c.useRef)(null),r=(0,c.useRef)(null),i=(0,c.useRef)(null),[d,u]=(0,c.useState)(null),x=(0,c.useCallback)(()=>{if(!s.current||!n.current||!r.current||!i.current)return;let e=s.current.childNodes,t=n.current.childNodes,a=r.current,l=i.current,o=l.getBoundingClientRect();l.innerHTML="";let d=Array.from(e).map(e=>{let t=e.getBoundingClientRect();return{x:t.right-o.left,y:t.top-o.top+t.height/2}}),c=Array.from(t).map(e=>{let t=e.getBoundingClientRect();return{x:t.left-o.left,y:t.top-o.top+t.height/2}}),u=a.getBoundingClientRect(),m={x:u.left-o.left,y:u.top-o.top+u.height/2,width:u.width};d.forEach((e,t)=>{let a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",`M ${e.x} ${e.y} C ${e.x+100} ${e.y} ${m.x-100} ${m.y} ${m.x} ${m.y}`),a.setAttribute("stroke","black"),a.setAttribute("fill","transparent"),l.appendChild(a)}),c.forEach((e,t)=>{let a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",`M ${m.x+m.width} ${m.y} C ${m.x+100} ${m.y} ${e.x-100} ${e.y} ${e.x} ${e.y}`),a.setAttribute("stroke","black"),a.setAttribute("fill","transparent"),l.appendChild(a)})},[]);return(0,c.useEffect)(()=>{x()},[t]),(0,c.useEffect)(()=>(window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[]),m.j.jsxs(m.j.Fragment,{children:[d&&m.j.jsxs(h.M,{open:d,onCancel:()=>u(null),footer:null,title:d.type.toUpperCase(),children:["table"===d.type&&m.j.jsx(m.a,{rows:d.data,columns:d.columns,skipColumns:["index"],rootClassNames:"w-full h-96 border border-gray-200 px-1"}),"image"===d.type&&m.j.jsx("img",{src:`data:image/png;base64,${d.data}`,alt:"chart"}),"code"===d.type&&m.j.jsx(m.j.Fragment,{children:m.j.jsx(v,{editable:!0,toolCode:d.code,className:"h-96 overflow-scroll",onChange:l})})]}),m.j.jsxs("div",{className:"flex flex-row items-center justify-between",children:[m.j.jsx("div",{className:"absolute left-0 right-0 w-full h-full pointer-events-none",children:m.j.jsx("svg",{ref:i,width:"100%",height:"100%"})}),m.j.jsx("div",{className:"flex flex-col overflow-auto justify-center items-start z-[1]",ref:s,children:t.inputs.map((e,t)=>m.j.jsx("div",{className:"flex flex-col m-4 rounded-md min-w-20 h-20 border shadow-sm",children:m.j.jsx(b,{input:e,onClick:e=>u({type:"table",...e.parsed}),isTable:e.type.indexOf("DataFrame")>-1})},t))}),m.j.jsxs("div",{className:"font-bold flex flex-row items-center ",ref:r,children:[m.j.jsx("div",{className:"rounded-md bg-blue-500 text-white p-1 px-2 ",children:e}),o&&m.j.jsx(g,{className:"h-6 w-6 inline-block ml-2 text-blue-200 cursor-pointer hover:text-blue-400 z-[2] bg-white",onClick:()=>u({type:"code",code:a})})]}),m.j.jsx("div",{className:"flex flex-col",ref:n,children:t.outputs.map((e,t)=>{var a;return m.j.jsxs("div",{className:"flex flex-row m-4",children:[m.j.jsx("div",{className:"flex flex-col m-4 min-w-20 h-20 rounded-md border shadow-sm",children:e.data&&e.parsed&&m.j.jsx(b,{name:"Table",isTable:!0,input:e,onClick:e=>u({type:"table",...e.parsed})})}),null!=(a=null==e?void 0:e.chart_images)&&a.length?m.j.jsx("div",{className:"m-4 w-20 rounded-md border shadow-sm",children:e.chart_images.map(e=>m.j.jsx(b,{name:"Image",isImage:!0,input:e,onClick:e=>{u({type:"image",data:e.data})}},e.data))}):m.j.jsx(m.j.Fragment,{})]},t)})})]})]})}function w({tool:e,loading:t,handleChange:a=(...e)=>{},testingResults:l=null}){let o=e.tool_name,s=e.code,n=e=>a("code",e);return m.j.jsxs("div",{className:"relative rounded-md min-h-60 w-full",children:[t&&m.j.jsxs("div",{className:"overlay w-full absolute top-0 left-0 grid place-content-center h-full z-[3] ",children:[m.j.jsx("div",{className:"absolute top-0 left-0 bg-gray-100 bg-opacity-90 w-full h-full rounded-md"}),m.j.jsxs("div",{className:"text-gray-800",children:[m.j.jsx(m.S,{}),"Generating"]})]}),l.generatedCode!==s&&m.j.jsxs("div",{className:"pointer-events-none text-xs text-rose-400 inset-y-0 my-3 flex items-center",children:[m.j.jsx(m.a8,{className:"h-3 w-3 fill-rose-400 mr-1"})," The code has been edited since these tests were run. Results might not be accurate."]}),l&&m.j.jsx(y,{toolName:o,testingResults:l,code:s,handleCodeChange:e=>n(e)})]})}function N({toolName:e,handleChange:t=(...e)=>{},toolDocString:a,toolCode:l=null,hideName:o=!1,hideDescription:s=!1,hideCode:n=!1,disabled:r=!1}){return m.j.jsxs(m.j.Fragment,{children:[!o&&m.j.jsx(m.U,{label:"Tool name",type:"text",disabled:r,rootClassNames:"mb-4 text-gray-600",placeholder:"Give your tool a name",status:e?"":"error",onChange:e=>t("tool_name",e.target.value),defaultValue:e}),!s&&m.j.jsx(m.T,{rootClassNames:"mb-4 w-full ",label:"Description",disabled:r,placeholder:"What does this tool do?",status:a?"":"error",onChange:e=>t("description",e.target.value),defaultValue:a}),l&&!n&&m.j.jsxs(m.j.Fragment,{children:[m.j.jsx("div",{className:"block text-gray-600 text-xs mb-2 font-light",children:"Code"}),m.j.jsx(v,{editable:!r,toolCode:l,onChange:e=>t("code",e)})]})]})}function C({toolbox:e,apiEndpoint:t,onAddTool:a=(...e)=>{}}){let l=(0,m.L)({protocol:"http",path:"generate_tool_code",apiEndpoint:t}),[o,s]=(0,c.useState)(!1),[n,r]=(0,c.useState)(!1),[i,d]=(0,c.useState)(null),[u,x]=(0,c.useState)({code:"",description:"",function_name:"",input_metadata:{},output_metadata:[],tool_name:"",toolbox:e}),g=u.tool_name,j=u.description,b=u.code;u.function_name;let y=(0,c.useContext)(m.M),[C,_]=(0,c.useState)(!1),k=(0,c.useCallback)((e,t)=>{try{if(!u.hasOwnProperty(e))throw Error(`Tool does not have property ${e}`);x(a=>({...a,[e]:t}))}catch(a){y.error(a.message)}},[u,x,y]),E=async()=>{_(!0);try{let e=await (0,m.aL)(u,t);e.success?(y.success("Tool added successfully"),a(u)):y.error("Failed to submit tool"+e.error_message)}catch(l){console.error(l),y.error("Failed to submit tool"+l.message)}finally{_(!1)}},S=async(e=null)=>{_(!0);try{let t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:g,tool_description:j,user_question:e,current_code:b||null})}).then(e=>e.json());if(!t.success)throw Error("Failed to generate tool code. "+t.error_message);let a={...u};a.code=t.generated_code,a.function_name=t.function_name;let o=t.testing_results;o.generatedCode=t.generated_code,a.input_metadata=(0,m.aM)(o.inputs,"name",["name","description","type"]),a.output_metadata=o.outputs.map(e=>({name:"output_df",description:"pandas df",type:"pandas.core.frame.DataFrame"})),o.inputs.forEach(e=>{-1!==e.type.indexOf("DataFrame")&&(e.parsed=(0,m.ad)(e.value))}),o.outputs.forEach(e=>{e.data&&(e.parsed=(0,m.ad)(e.data))}),d(o),x(a)}catch(s){y.error(s),console.error(s)}finally{_(!1)}};return m.j.jsxs(m.j.Fragment,{children:[m.j.jsx("div",{className:"tool rounded mr-3 mb-3  bg-blue-50 border border-blue-400 flex items-center p-3 cursor-pointer hover:shadow-lg",onClick:()=>s(!0),children:m.j.jsx("div",{className:"flex items-center  justify-center text-blue-500",children:m.j.jsx("span",{className:"",children:m.j.jsx("p",{className:"m-0",children:"+"})})})}),m.j.jsxs(h.M,{open:o,onCancel:e=>{s(!1)},footer:null,className:"w-8/12",children:[m.j.jsxs("h1",{className:"text-lg font-bold mb-4",children:["Add a tool to the ",m.aK[e]," toolbox"]}),m.j.jsxs("div",{className:"flex flex-row relative",children:[m.j.jsx(f.S,{open:!0,location:"left",title:"",rootClassNames:"min-h-full bg-gray-50",contentClassNames:"px-2 pt-5 flex flex-col pb-14 rounded-tl-lg relative sm:block grow",children:m.j.jsx("div",{className:"pr-4 *:font-sans",children:m.j.jsx(N,{disabled:C,toolName:g,handleChange:k,toolDocString:u.description})})}),m.j.jsx("div",{className:"content grow flex flex-col items-center justify-center relative pl-8",children:u.code?m.j.jsxs(m.j.Fragment,{children:[m.j.jsxs("div",{className:"flex flex-row items-start justify-between w-full mb-4 ",children:[m.j.jsx(f.T,{onToggle:e=>r(e),defaultOn:n,offLabel:"Code",onLabel:m.j.jsxs("span",{className:"flex flex-row items-center",children:[m.j.jsx(p,{className:"text-yellow-400 inline w-4 h-4 mr-2"}),"Playground"]}),rootClassNames:"self-start"}),m.j.jsx(m.ab,{className:"px-2 text-sm bg-blue-400",onClick:E,children:"Save"})]}),n?m.j.jsx(w,{loading:C,tool:u,handleChange:k,testingResults:i}):m.j.jsx(v,{className:"w-full",editable:!C,toolCode:u.code,onChange:e=>k("code",e)}),m.j.jsx(m.U,{placeholder:"What should we change?",rootClassNames:"sticky bottom-0 mt-4 w-full lg:w-6/12 shadow-lg rounded-md",inputClassNames:(0,m.t)("bg-white border mx-auto h-16 hover:border-blue-500 focus:border-blue-500",C?"hover:border-gray-400 focus:border-gray-400":""),disabled:C,onPressEnter:e=>{if(!e.target.value){y.error("Can't be blank!");return}S(e.target.value)}})]}):m.j.jsx("div",{className:"",children:m.j.jsx(m.ab,{className:"p-2 m-4 text-sm border w-60",disabled:!g||!j||C,onClick:()=>{if(!g||!j){y.error("Please fill in the tool name and description");return}S()},children:C?m.j.jsxs("div",{children:[m.j.jsx(m.S,{classNames:"text-gray-300"}),"Generating"]}):"Generate"})})})]})]})]})}let _=(0,n.Z)("http","toggle_disable_tool"),k=(0,n.Z)("http","delete_tool");function E(){var e;let[t,a]=(0,c.useState)(null),i=(0,c.useRef)(null),m=(0,c.useContext)(u.$0),[h,x]=(0,c.useState)(!1),f=(0,c.useMemo)(()=>{if(t){let e={};return Object.values(t).forEach(t=>{e[t.toolbox]||(e[t.toolbox]={}),e[t.toolbox][t.function_name]=t}),e}return null},[t]),[g,j]=(0,c.useState)(null),p=e=>{a({...t,[e.function_name]:e})};(0,c.useEffect)(()=>{!async function(){let e=await fetch((0,n.Z)("http","get_user_tools"),{method:"POST"}),t=(await e.json()).tools;i.current=structuredClone(t),a(t)}()},[]);let b=(0,c.useCallback)(async()=>{if(!h)try{x(!0);let e=await d({function_name:t[g].function_name,tool_name:t[g].tool_name,description:t[g].description,code:t[g].code,input_metadata:t[g].input_metadata,output_metadata:t[g].output_metadata,toolbox:t[g].toolbox});if(e.success)m.success("Tool updated successfully");else throw Error(e.error_message)}catch(a){m.error(a)}finally{x(!1)}},[t,g,m,x,h]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{}),(0,l.jsx)(s.Z,{id:"add-tools",userType:"admin",children:t&&f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.u_,{open:!!g,onCancel:e=>{j(null)},contentClassNames:"z-[5]",footer:null!=t&&null!==(e=t[g])&&void 0!==e&&!!e.edited&&(0,l.jsx)(u.zx,{className:"absolute animate-fade-in bottom-10 shadow-md right-10 w-40 text-center rounded-md p-2 cursor-pointer z-[6]",onClick:b,disabled:h,children:"Save"}),className:"w-10/12 overflow-scroll h-[90%]",children:g?(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"flex border-b bg-gray-100 p-2 rounded-t-md",children:[(0,l.jsxs)("div",{className:"grow",children:[(0,l.jsx)("h1",{className:"text-lg mb-2",children:t[g].tool_name}),(0,l.jsxs)("div",{className:"tool-tags",children:[t[g].cannot_disable?(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Cannot disable"}):t[g].disabled?(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Disabled"}):(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-teal-500 py-1 text-xs",children:"Enabled"}),t[g].cannot_delete&&(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Cannot delete"})]})]}),(0,l.jsxs)("div",{className:"tool-actions flex flex-col gap-2 self-center",children:[!t[g].cannot_disable&&(0,l.jsx)(u.zx,{className:"font-mono bg-gray-50 border border-gray-200 text-gray-500 hover:bg-blue-500 hover:text-white",onClick:async()=>{let e=t[g].disabled?"enabled":"disabled",l=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({function_name:t[g].function_name})}).then(e=>e.json());l.success?(m.success("Tool ".concat(g," is now ").concat(e)),a(e=>{let t={...e};return t[g].disabled=!t[g].disabled,t})):m.error("Failed to ".concat(e.slice(0,-1)," tool. ").concat(l.error_message?"Error: "+l.error_message:""))},children:t[g].disabled?"Enable":"Disable"}),!t[g].cannot_delete&&(0,l.jsx)(u.zx,{className:"font-mono bg-gray-50 border border-gray-200 text-gray-500 hover:bg-rose-500 hover:text-white",onClick:async()=>{let e=await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({function_name:t[g].function_name})}).then(e=>e.json());e.success?(m.success("Tool ".concat(g," is now deleted")),a(e=>{let t={...e};return delete t[g],t}),j(null)):m.error("Failed to delete tool. ".concat(e.error_message?"Error: "+e.error_message:""))},children:"Delete"})]})]}),(0,l.jsx)("div",{className:"mt-4 p-2 relative font-mono",children:(0,l.jsx)(N,{toolName:t[g].tool_name,toolDocString:t[g].description,toolCode:t[g].code,handleChange:(e,t)=>{a(a=>{let l={...a};return l[g][e]=t,l[g].edited=["tool_name","description","code"].some(e=>i.current[g][e]!==l[g][e]),l})}})})]}):"Please select a tool"},g),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Tool management"}),(0,l.jsx)("div",{className:"tool-list",children:Object.keys(f).map(e=>(Object.keys(f[e]).map(e=>[t[e].tool_name,t[e].function_name]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-md font-bold mb-4",children:r[e]}),(0,l.jsxs)("div",{className:"toolbox flex flex-wrap flex-row mb-10",children:[Object.keys(f[e]).map(e=>(0,l.jsx)("div",{className:"tool rounded-md mr-3 mb-3 bg-gray-50 border border-gray-400 p-3 w-60 cursor-pointer hover:shadow-md",onClick:()=>j(e),children:(0,l.jsx)("div",{className:"tool-name text-md",children:t[e].tool_name})},e)),(0,l.jsx)(C,{toolbox:e,onAddTool:p,apiEndpoint:"http://localhost"})]})]},e)))})]})]}):(0,l.jsx)("div",{children:"Fetching your tools..."})})]})}},93146:function(e,t){"use strict";let a=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log("http://localhost"),""!==t)?"ws"===e?"".concat("http://localhost".replace("http","ws"),"/").concat(t):"".concat("http://localhost","/").concat(t):"".concat("http://localhost")};t.Z=a}},function(e){e.O(0,[141,435,774,888,179],function(){return e(e.s=91012)}),_N_E=e.O()}]);