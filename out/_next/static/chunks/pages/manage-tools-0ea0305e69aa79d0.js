(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{91012:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-tools",function(){return a(57252)}])},26335:function(e,t,a){"use strict";var l=a(28598),o=a(1887),s=a.n(o);t.Z=()=>(0,l.jsxs)(s(),{children:[(0,l.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,l.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},82067:function(e,t,a){"use strict";var l=a(28598),o=a(82684),s=a(97574),n=a(79869),r=a(34376);a(12691);var i=a(26978),d=a(47663),c=a(56572);t.Z=e=>{let{id:t,userType:a,children:u,rootClassNames:m="",contentClassNames:h=""}=e,{Content:f,Sider:g}=n.Layout,[j,p]=(0,o.useState)([]),[v,y]=(0,o.useContext)(s.S),w=(0,r.useRouter)(),redirect=e=>{w.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),y({user:null,token:null,userType:null}),redirect("/static/log-in.html")},N=(0,d.usePathname)();(0,o.useEffect)(()=>{p(("admin"==a?[{key:"manage-database",title:"Manage Database",href:"/static/extract-metadata.html"},{key:"manage-users",title:"Manage Users",href:"/static/manage-users.html"},{key:"manage-tools",title:"Manage tools",href:"/static/manage-tools.html"},{key:"check-readiness",title:"Check Readiness",href:"/static/check-readiness.html"},{key:"align-model",title:"Align Model",href:"/static/align-model.html"},{key:"view-feedback",title:"View Feedback",href:"/static/view-feedback.html"},{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:a?[{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:[]).map(e=>(e.current=e.href==N,e)))},[a]);let[C,_]=(0,o.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,o.useEffect)(()=>{"/query-data"===N&&_("flex flex-col md:min-h-screen relative")},[N]),(0,l.jsxs)("div",{className:(0,c.m6)(C,m),children:[j.length?(0,l.jsx)(i.l2,{rootClassNames:"border-b",items:j}):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)("div",{className:(0,c.m6)("grow",h),children:u})]})}},57252:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ManageTools}});var l=a(28598),o=a(26335),s=a(82067),n=a(79204);let r={cancer_survival:"Cancer Survival",data_fetching:"Data Fetching",plots:"Plots",stats:"Stats"},i=(0,n.Z)("http","add_tool"),addTool=async e=>{let{tool_name:t,function_name:a,description:l,code:o,input_metadata:s,output_metadata:n,toolbox:r,no_code:d=!1}=e;try{let e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:t,function_name:a,description:l,code:o,input_metadata:s,output_metadata:n,toolbox:r,no_code:d})});if(!e.ok)throw Error("Failed to add tool");let c=await e.json();return c}catch(e){return console.error(e),{success:!1,error_message:e}}};var d=a(82684),c=a(26978),u=a(24014),m=a(30797),h=a(37561),f=a(54161);let g=d.forwardRef(function({title:e,titleId:t,...a},l){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?d.createElement("title",{id:t},e):null,d.createElement("path",{fillRule:"evenodd",d:"M4.25 2A2.25 2.25 0 0 0 2 4.25v11.5A2.25 2.25 0 0 0 4.25 18h11.5A2.25 2.25 0 0 0 18 15.75V4.25A2.25 2.25 0 0 0 15.75 2H4.25Zm4.03 6.28a.75.75 0 0 0-1.06-1.06L4.97 9.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 0 0 1.06-1.06L6.56 10l1.72-1.72Zm4.5-1.06a.75.75 0 1 0-1.06 1.06L13.44 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06l2.25-2.25a.75.75 0 0 0 0-1.06l-2.25-2.25Z",clipRule:"evenodd"}))}),j=d.forwardRef(function({title:e,titleId:t,...a},l){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?d.createElement("title",{id:t},e):null,d.createElement("path",{fillRule:"evenodd",d:"M1 5.25A2.25 2.25 0 0 1 3.25 3h13.5A2.25 2.25 0 0 1 19 5.25v9.5A2.25 2.25 0 0 1 16.75 17H3.25A2.25 2.25 0 0 1 1 14.75v-9.5Zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75v-2.69l-2.22-2.219a.75.75 0 0 0-1.06 0l-1.91 1.909.47.47a.75.75 0 1 1-1.06 1.06L6.53 8.091a.75.75 0 0 0-1.06 0l-2.97 2.97ZM12 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))}),p=d.forwardRef(function({title:e,titleId:t,...a},l){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?d.createElement("title",{id:t},e):null,d.createElement("path",{d:"M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785l-.238-1.192ZM6.949 5.684a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633L6.95 5.684ZM13.949 13.684a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632l-.183-.551Z"}))});function k({input:e,name:t=null,onClick:a=(...e)=>{},isTable:l=!1,isImage:o=!1}){return u.j.jsxs(u.j.Fragment,{children:[u.j.jsx("div",{className:"text-sm rounded-t-md font-semibold text-gray-900 p-1 bg-gray-100 mb-1",children:t||e.name}),u.j.jsx("div",{className:"p-1 grow",children:l?u.j.jsx("div",{className:"p-2 bg-blue-50 h-full hover:bg-blue-100 group shadow-inner grid grid-cols-4 gap-1 grid-rows-2 rounded-md border-gray-100 cursor-pointer",onClick:()=>a(e),children:(0,m.r)(0,8).map((e,t)=>u.j.jsx("div",{className:"bg-blue-100 group-hover:bg-blue-200"},t))}):o?u.j.jsx("div",{className:"h-full",children:u.j.jsx(j,{onClick:()=>a(e),className:"w-full text-blue-50 cursor-pointer hover:text-blue-200"})}):u.j.jsx("div",{className:"px-1",children:u.j.jsx("div",{className:"text-sm text-gray-500",children:e.value+""})})})]})}function $({toolCode:e,className:t="",editable:a=!1,onChange:l=(...e)=>{}}){let o=(0,d.useRef)(null);return u.j.jsx(h.R,{ref:o,className:(0,u.t)("*:outline-0 *:focus:outline-0",t),value:e,editable:a,extensions:[(0,h.p)(),h.l.lineWrapping],onChange:e=>{l(e)},basicSetup:{lineNumbers:!1,highlightActiveLine:!1}})}function ne({toolName:e,testingResults:t,code:a,handleCodeChange:l=(...e)=>{},showCode:o=!0}){let s=(0,d.useRef)(null),n=(0,d.useRef)(null),r=(0,d.useRef)(null),i=(0,d.useRef)(null),[c,h]=(0,d.useState)(null),f=(0,d.useCallback)(()=>{if(!s.current||!n.current||!r.current||!i.current)return;let e=s.current.childNodes,t=n.current.childNodes,a=r.current,l=i.current,o=l.getBoundingClientRect();l.innerHTML="";let d=Array.from(e).map(e=>{let t=e.getBoundingClientRect();return{x:t.right-o.left,y:t.top-o.top+t.height/2}}),c=Array.from(t).map(e=>{let t=e.getBoundingClientRect();return{x:t.left-o.left,y:t.top-o.top+t.height/2}}),u=a.getBoundingClientRect(),m={x:u.left-o.left,y:u.top-o.top+u.height/2,width:u.width};d.forEach((e,t)=>{let a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",`M ${e.x} ${e.y} C ${e.x+100} ${e.y} ${m.x-100} ${m.y} ${m.x} ${m.y}`),a.setAttribute("stroke","black"),a.setAttribute("fill","transparent"),l.appendChild(a)}),c.forEach((e,t)=>{let a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",`M ${m.x+m.width} ${m.y} C ${m.x+100} ${m.y} ${e.x-100} ${e.y} ${e.x} ${e.y}`),a.setAttribute("stroke","black"),a.setAttribute("fill","transparent"),l.appendChild(a)})},[]);return(0,d.useEffect)(()=>{f()},[t]),(0,d.useEffect)(()=>(window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)),[]),u.j.jsxs(u.j.Fragment,{children:[c&&u.j.jsxs(m.M,{open:c,onCancel:()=>h(null),footer:null,title:c.type.toUpperCase(),children:["table"===c.type&&u.j.jsx(u.a,{rows:c.data,columns:c.columns,skipColumns:["index"],rootClassNames:"w-full h-96 border border-gray-200 px-1"}),"image"===c.type&&u.j.jsx("img",{src:`data:image/png;base64,${c.data}`,alt:"chart"}),"code"===c.type&&u.j.jsx(u.j.Fragment,{children:u.j.jsx($,{editable:!0,toolCode:c.code,className:"h-96 overflow-auto",onChange:l})})]}),u.j.jsxs("div",{className:"flex flex-row items-center justify-between",children:[u.j.jsx("div",{className:"absolute left-0 right-0 w-full h-full pointer-events-none",children:u.j.jsx("svg",{ref:i,width:"100%",height:"100%"})}),u.j.jsx("div",{className:"flex flex-col overflow-auto justify-center items-start z-[1]",ref:s,children:t.inputs.map((e,t)=>u.j.jsx("div",{className:"flex flex-col m-4 rounded-md min-w-20 h-20 border shadow-sm",children:u.j.jsx(k,{input:e,onClick:e=>h({type:"table",...e.parsed}),isTable:e.type.indexOf("DataFrame")>-1})},t))}),u.j.jsxs("div",{className:"font-bold flex flex-row items-center ",ref:r,children:[u.j.jsx("div",{className:"rounded-md bg-blue-500 text-white p-1 px-2 ",children:e}),o&&u.j.jsx(g,{className:"h-6 w-6 inline-block ml-2 text-blue-200 cursor-pointer hover:text-blue-400 z-[2] bg-white",onClick:()=>h({type:"code",code:a})})]}),u.j.jsx("div",{className:"flex flex-col",ref:n,children:t.outputs.map((e,t)=>{var a;return u.j.jsxs("div",{className:"flex flex-row m-4",children:[u.j.jsx("div",{className:"flex flex-col m-4 min-w-20 h-20 rounded-md border shadow-sm",children:e.data&&e.parsed&&u.j.jsx(k,{name:"Table",isTable:!0,input:e,onClick:e=>h({type:"table",...e.parsed})})}),null!=(a=null==e?void 0:e.chart_images)&&a.length?u.j.jsx("div",{className:"m-4 w-20 rounded-md border shadow-sm",children:e.chart_images.map(e=>u.j.jsx(k,{name:"Image",isImage:!0,input:e,onClick:e=>{h({type:"image",data:e.data})}},e.data))}):u.j.jsx(u.j.Fragment,{})]},t)})})]})]})}function ce({tool:e,loading:t,handleChange:a=(...e)=>{},testingResults:l=null}){let o=e.tool_name,s=e.code,x=e=>a("code",e);return u.j.jsxs("div",{className:"relative rounded-md min-h-60 w-full",children:[t&&u.j.jsxs("div",{className:"overlay w-full absolute top-0 left-0 grid place-content-center h-full z-[3] ",children:[u.j.jsx("div",{className:"absolute top-0 left-0 bg-gray-100 bg-opacity-90 w-full h-full rounded-md"}),u.j.jsxs("div",{className:"text-gray-800",children:[u.j.jsx(u.S,{}),"Generating"]})]}),l.generatedCode!==s&&u.j.jsxs("div",{className:"pointer-events-none text-xs text-rose-400 inset-y-0 my-3 flex items-center",children:[u.j.jsx(u.a5,{className:"h-3 w-3 fill-rose-400 mr-1"})," The code has been edited since these tests were run. Results might not be accurate."]}),l&&u.j.jsx(ne,{toolName:o,testingResults:l,code:s,handleCodeChange:e=>x(e)})]})}function ie({toolName:e,handleChange:t=(...e)=>{},toolDocString:a,toolCode:l=null,hideName:o=!1,hideDescription:s=!1,hideCode:n=!1,disabled:r=!1}){return u.j.jsxs(u.j.Fragment,{children:[!o&&u.j.jsx(u.R,{label:"Tool name",type:"text",disabled:r,rootClassNames:"mb-4 text-gray-600",placeholder:"Give your tool a name",status:e?"":"error",onChange:e=>t("tool_name",e.target.value),defaultValue:e}),!s&&u.j.jsx(u.T,{rootClassNames:"mb-4 w-full ",label:"Description",disabled:r,placeholder:"What does this tool do?",status:a?"":"error",onChange:e=>t("description",e.target.value),defaultValue:a}),l&&!n&&u.j.jsxs(u.j.Fragment,{children:[u.j.jsx("div",{className:"block text-gray-600 text-xs mb-2 font-light",children:"Code"}),u.j.jsx($,{editable:!r,toolCode:l,onChange:e=>t("code",e)})]})]})}function xe({toolbox:e,apiEndpoint:t,onAddTool:a=(...e)=>{}}){let l=(0,u.K)({protocol:"http",path:"generate_tool_code",apiEndpoint:t}),[o,s]=(0,d.useState)(!1),[n,r]=(0,d.useState)(!1),[i,c]=(0,d.useState)(null),[h,g]=(0,d.useState)({code:"",description:"",function_name:"",input_metadata:{},output_metadata:[],tool_name:"",toolbox:e}),j=h.tool_name,v=h.description,y=h.code;h.function_name;let w=(0,d.useContext)(u.M),[N,C]=(0,d.useState)(!1),_=(0,d.useCallback)((e,t)=>{try{if(!h.hasOwnProperty(e))throw Error(`Tool does not have property ${e}`);g(a=>({...a,[e]:t}))}catch(e){w.error(e.message)}},[h,g,w]),T=async()=>{C(!0);try{let e=await (0,u.aJ)(h,t);e.success?(w.success("Tool added successfully"),a(h)):w.error("Failed to submit tool"+e.error_message)}catch(e){console.error(e),w.error("Failed to submit tool"+e.message)}finally{C(!1)}},b=async(e=null)=>{C(!0);try{let t=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:j,tool_description:v,user_question:e,current_code:y||null})}).then(e=>e.json());if(!t.success)throw Error("Failed to generate tool code. "+t.error_message);let a={...h};a.code=t.generated_code,a.function_name=t.function_name;let o=t.testing_results;o.generatedCode=t.generated_code,a.input_metadata=(0,u.aK)(o.inputs,"name",["name","description","type"]),a.output_metadata=o.outputs.map(e=>({name:"output_df",description:"pandas df",type:"pandas.core.frame.DataFrame"})),o.inputs.forEach(e=>{-1!==e.type.indexOf("DataFrame")&&(e.parsed=(0,u.aa)(e.value))}),o.outputs.forEach(e=>{e.data&&(e.parsed=(0,u.aa)(e.data))}),c(o),g(a)}catch(e){w.error(e),console.error(e)}finally{C(!1)}};return u.j.jsxs(u.j.Fragment,{children:[u.j.jsx("div",{className:"tool rounded mr-3 mb-3  bg-blue-50 border border-blue-400 flex items-center p-3 cursor-pointer hover:shadow-lg",onClick:()=>s(!0),children:u.j.jsx("div",{className:"flex items-center  justify-center text-blue-500",children:u.j.jsx("span",{className:"",children:u.j.jsx("p",{className:"m-0",children:"+"})})})}),u.j.jsxs(m.M,{open:o,onCancel:e=>{s(!1)},footer:null,className:"w-8/12",children:[u.j.jsxs("h1",{className:"text-lg font-bold mb-4",children:["Add a tool to the ",u.aI[e]," toolbox"]}),u.j.jsxs("div",{className:"flex flex-row relative",children:[u.j.jsx(f.S,{open:!0,location:"left",title:"",rootClassNames:"min-h-full bg-gray-50",contentClassNames:"px-2 pt-5 flex flex-col pb-14 rounded-tl-lg relative sm:block grow",children:u.j.jsx("div",{className:"pr-4 *:font-sans",children:u.j.jsx(ie,{disabled:N,toolName:j,handleChange:_,toolDocString:h.description})})}),u.j.jsx("div",{className:"content grow flex flex-col items-center justify-center relative pl-8",children:h.code?u.j.jsxs(u.j.Fragment,{children:[u.j.jsxs("div",{className:"flex flex-row items-start justify-between w-full mb-4 ",children:[u.j.jsx(f.T,{onToggle:e=>r(e),defaultOn:n,offLabel:"Code",onLabel:u.j.jsxs("span",{className:"flex flex-row items-center",children:[u.j.jsx(p,{className:"text-yellow-400 inline w-4 h-4 mr-2"}),"Playground"]}),rootClassNames:"self-start"}),u.j.jsx(u.a8,{className:"px-2 text-sm bg-blue-400",onClick:T,children:"Save"})]}),n?u.j.jsx(ce,{loading:N,tool:h,handleChange:_,testingResults:i}):u.j.jsx($,{className:"w-full",editable:!N,toolCode:h.code,onChange:e=>_("code",e)}),u.j.jsx(u.R,{placeholder:"What should we change?",rootClassNames:"sticky bottom-0 mt-4 w-full lg:w-6/12 shadow-lg rounded-md",inputClassNames:(0,u.t)("bg-white border mx-auto h-16 hover:border-blue-500 focus:border-blue-500",N?"hover:border-gray-400 focus:border-gray-400":""),disabled:N,onPressEnter:e=>{if(!e.target.value){w.error("Can't be blank!");return}b(e.target.value)}})]}):u.j.jsx("div",{className:"",children:u.j.jsx(u.a8,{className:"p-2 m-4 text-sm border w-60",disabled:!j||!v||N,onClick:()=>{if(!j||!v){w.error("Please fill in the tool name and description");return}b()},children:N?u.j.jsxs("div",{children:[u.j.jsx(u.S,{classNames:"text-gray-300"}),"Generating"]}):"Generate"})})})]})]})]})}var v=a(48497);let y=(0,n.Z)("http","toggle_disable_tool"),w=(0,n.Z)("http","delete_tool");function ManageTools(){var e;let[t,a]=(0,d.useState)(null),i=(0,d.useRef)(null),u=(0,d.useContext)(c.$0),[m,h]=(0,d.useState)(!1),f=(0,d.useMemo)(()=>{if(t){let e={};return Object.values(t).forEach(t=>{e[t.toolbox]||(e[t.toolbox]={}),e[t.toolbox][t.function_name]=t}),e}return null},[t]),[g,j]=(0,d.useState)(null),onAddTool=e=>{a({...t,[e.function_name]:e})};(0,d.useEffect)(()=>{!async function(){let e=await fetch((0,n.Z)("http","get_user_tools"),{method:"POST"}),t=(await e.json()).tools;i.current=structuredClone(t),a(t)}()},[]);let p=(0,d.useCallback)(async()=>{if(!m)try{h(!0);let e=await addTool({function_name:t[g].function_name,tool_name:t[g].tool_name,description:t[g].description,code:t[g].code,input_metadata:t[g].input_metadata,output_metadata:t[g].output_metadata,toolbox:t[g].toolbox});if(e.success)u.success("Tool updated successfully");else throw Error(e.error_message)}catch(e){u.error(e)}finally{h(!1)}},[t,g,u,h,m]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{}),(0,l.jsx)(s.Z,{id:"add-tools",userType:"admin",children:t&&f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.u_,{open:!!g,onCancel:e=>{j(null)},contentClassNames:"z-[5]",footer:null!=t&&null!==(e=t[g])&&void 0!==e&&!!e.edited&&(0,l.jsx)(c.zx,{className:"absolute animate-fade-in bottom-10 shadow-md right-10 w-40 text-center rounded-md p-2 cursor-pointer z-[6]",onClick:p,disabled:m,children:"Save"}),className:"w-10/12 overflow-scroll h-[90%]",children:g?(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"flex border-b bg-gray-100 p-2 rounded-t-md",children:[(0,l.jsxs)("div",{className:"grow",children:[(0,l.jsx)("h1",{className:"text-lg mb-2",children:t[g].tool_name}),(0,l.jsxs)("div",{className:"tool-tags",children:[t[g].cannot_disable?(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Cannot disable"}):t[g].disabled?(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Disabled"}):(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-teal-500 py-1 text-xs",children:"Enabled"}),t[g].cannot_delete&&(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Cannot delete"})]})]}),(0,l.jsxs)("div",{className:"tool-actions flex flex-col gap-2 self-center",children:[!t[g].cannot_disable&&(0,l.jsx)(c.zx,{className:"font-mono bg-gray-50 border border-gray-200 text-gray-500 hover:bg-blue-500 hover:text-white",onClick:async()=>{let e=t[g].disabled?"enabled":"disabled",l=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({function_name:t[g].function_name})}).then(e=>e.json());l.success?(u.success("Tool ".concat(g," is now ").concat(e)),a(e=>{let t={...e};return t[g].disabled=!t[g].disabled,t})):u.error("Failed to ".concat(e.slice(0,-1)," tool. ").concat(l.error_message?"Error: "+l.error_message:""))},children:t[g].disabled?"Enable":"Disable"}),!t[g].cannot_delete&&(0,l.jsx)(c.zx,{className:"font-mono bg-gray-50 border border-gray-200 text-gray-500 hover:bg-rose-500 hover:text-white",onClick:async()=>{let e=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({function_name:t[g].function_name})}).then(e=>e.json());e.success?(u.success("Tool ".concat(g," is now deleted")),a(e=>{let t={...e};return delete t[g],t}),j(null)):u.error("Failed to delete tool. ".concat(e.error_message?"Error: "+e.error_message:""))},children:"Delete"})]})]}),(0,l.jsx)("div",{className:"mt-4 p-2 relative font-mono",children:(0,l.jsx)(ie,{toolName:t[g].tool_name,toolDocString:t[g].description,toolCode:t[g].code,handleChange:(e,t)=>{a(a=>{let l={...a};return l[g][e]=t,l[g].edited=["tool_name","description","code"].some(e=>i.current[g][e]!==l[g][e]),l})}})})]}):"Please select a tool"},g),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Tool management"}),(0,l.jsx)("div",{className:"tool-list",children:Object.keys(f).map(e=>(Object.keys(f[e]).map(e=>[t[e].tool_name,t[e].function_name]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-md font-bold mb-4",children:r[e]}),(0,l.jsxs)("div",{className:"toolbox flex flex-wrap flex-row mb-10",children:[Object.keys(f[e]).map(e=>(0,l.jsx)("div",{className:"tool rounded-md mr-3 mb-3 bg-gray-50 border border-gray-400 p-3 w-60 cursor-pointer hover:shadow-md",onClick:()=>j(e),children:(0,l.jsx)("div",{className:"tool-name text-md",children:t[e].tool_name})},e)),(0,l.jsx)(xe,{toolbox:e,onAddTool:onAddTool,apiEndpoint:v.env.NEXT_PUBLIC_AGENTS_ENDPOINT||""})]})]},e)))})]})]}):(0,l.jsx)("div",{children:"Fetching your tools..."})})]})}},79204:function(e,t,a){"use strict";var l=a(48497);t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log(l.env.NEXT_PUBLIC_AGENTS_ENDPOINT),""!==t)?"ws"===e?"".concat((l.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(t):"".concat(l.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(t):"".concat(l.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}}},function(e){e.O(0,[152,435,774,888,179],function(){return e(e.s=91012)}),_N_E=e.O()}]);