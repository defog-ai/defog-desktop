(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{84308:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-notebooks",function(){return a(91508)}])},26335:function(e,t,a){"use strict";var s=a(28598),o=a(1887),r=a.n(o);t.Z=()=>(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,s.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},82067:function(e,t,a){"use strict";var s=a(28598),o=a(82684),r=a(97574),i=a(79869),c=a(34376);a(12691);var n=a(26978),l=a(47663),d=a(56572);t.Z=e=>{let{id:t,userType:a,children:u,rootClassNames:m="",contentClassNames:h=""}=e,{Content:f,Sider:g}=i.Layout,[v,p]=(0,o.useState)([]),[y,x]=(0,o.useContext)(r.S),k=(0,c.useRouter)(),redirect=e=>{k.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),x({user:null,token:null,userType:null}),redirect("/static/log-in.html")},_=(0,l.usePathname)();(0,o.useEffect)(()=>{p(("admin"==a?[{key:"manage-database",title:"Manage Database",href:"/static/extract-metadata.html"},{key:"manage-users",title:"Manage Users",href:"/static/manage-users.html"},{key:"manage-tools",title:"Manage tools",href:"/static/manage-tools.html"},{key:"check-readiness",title:"Check Readiness",href:"/static/check-readiness.html"},{key:"align-model",title:"Align Model",href:"/static/align-model.html"},{key:"view-feedback",title:"View Feedback",href:"/static/view-feedback.html"},{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:a?[{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:[]).map(e=>(e.current=e.href==_,e)))},[a]);let[N,j]=(0,o.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,o.useEffect)(()=>{("/query-data"===_||"/static/query-data.html"===_)&&j("flex flex-col md:min-h-screen relative")},[_]),(0,s.jsxs)("div",{className:(0,d.m6)(N,m),children:[v.length?(0,s.jsx)(n.l2,{rootClassNames:"border-b",items:v}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{className:(0,d.m6)("grow",h),children:u})]})}},91508:function(e,t,a){"use strict";a.r(t);var s=a(28598),o=a(82684),r=a(26335),i=a(54186),c=a(18953),n=a(34376),l=a(79204),d=a(82067),u=a(97574);t.default=()=>{let[e,t]=(0,o.useState)(!1),[a,m]=(0,o.useContext)(u.S),[h,f]=(0,o.useState)([]),[g,v]=(0,o.useState)([]),[p,y]=(0,o.useState)([]),x=(0,n.useRouter)();async function archiveToggle(e){let t=e.doc_id,a=e.archived,s=p,o=h;a?(s=p.filter(e=>e.doc_id!==t),o=[...h,...p.filter(e=>e.doc_id===t).map(e=>(e.archived=!1,e))]):(s=[...p,...h.filter(e=>e.doc_id===t).map(e=>(e.archived=!0,e))],o=h.filter(e=>e.doc_id!==t)),y(s),f(o);let r=await fetch((0,l.Z)("http","toggle_archive_status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_id:t,archive_status:!a})});(r=await r.json()).success&&c.default.success("Successfully ".concat(a?"un":"","archived doc")),r.success||c.default.error("Error ".concat(a?"un":"","archiving doc"))}let getNotebooks=async()=>{if(!a.token)return;let e=await fetch((0,l.Z)("http","get_docs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a.token})});if((e=await e.json()).success){let t=e.docs,s=e.recently_viewed_docs||[];t.forEach(e=>{e.timestamp=new Date(e.timestamp)}),s=s.map(e=>({...e,timestamp:new Date(e.timestamp),created_by:e.username===a.user?"You":e.username})),t.sort((e,t)=>t.timestamp-e.timestamp),v(s),s.sort((e,t)=>t.timestamp-e.timestamp);let o=t.filter(e=>e.archived);t=t.filter(e=>!e.archived),y(o),f(t)}if(!e.success)throw Error(e.error_message);t(!1)};return(0,o.useEffect)(()=>{t(!0);let e=a.token,s=a.userType;if(!s){let t=localStorage.getItem("defogUser");if(e=localStorage.getItem("defogToken"),s=localStorage.getItem("defogUserType"),!t||!e||!s){x.push("/log-in");return}m({user:t,token:e,userType:s})}e?getNotebooks():x.push("/log-in")},[a,a.token]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{}),(0,s.jsxs)(d.Z,{id:"view-notebooks",userType:a.userType,children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Notebooks"}),(0,s.jsx)("h2",{className:"text-lg mb-4",children:"Your notebooks"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-start",children:h&&!e?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("div",{children:"Loading docs..."})}),g.length?(0,s.jsx)("h2",{className:"text-lg mb-4",children:"Recently viewed"}):null,(0,s.jsx)("div",{className:"flex flex-wrap justify-start",children:g&&!e?(0,s.jsx)(s.Fragment,{children:g.map(e=>(0,s.jsx)(DocIcon,{doc:e,onClick:archiveToggle,recentlyViewed:!0},e.doc_id))}):(0,s.jsx)("div",{children:"Loading recently viewed docs..."})}),0===p.length?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.default,{bordered:!1,size:"small",rootClassName:"archived-collapse",items:[{label:"Archived notebooks",key:"archived-docs",children:(0,s.jsx)("div",{className:"doc-icons-container",children:p.map(e=>(0,s.jsx)(DocIcon,{doc:e,onClick:archiveToggle},e.doc_id))})}]})})]})]})}},79204:function(e,t,a){"use strict";var s=a(48497);t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log(s.env.NEXT_PUBLIC_AGENTS_ENDPOINT),""!==t)?"ws"===e?"".concat((s.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(t):"".concat(s.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(t):"".concat(s.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}}},function(e){e.O(0,[435,774,888,179],function(){return e(e.s=84308)}),_N_E=e.O()}]);