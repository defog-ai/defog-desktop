(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{13831:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return o(83271)}])},42449:function(e,t,o){"use strict";var n=o(28598),l=o(1887),r=o.n(l);let i=()=>(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,n.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]});t.Z=i},22500:function(e,t,o){"use strict";var n=o(28598),l=o(82684),r=o(36189),i=o(79869),a=o(34376);o(12691);var s=o(26978),c=o(47663),d=o(56572);let u=e=>{let{id:t,userType:o,children:u,rootClassNames:m="",contentClassNames:p=""}=e,{Content:g,Sider:f}=i.Ar,[v,h]=(0,l.useState)([]),[y,b]=(0,l.useContext)(r.S),w=(0,a.useRouter)(),x=e=>{w.push(e)},k=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),b({user:null,token:null,userType:null}),x("/log-in")},I=(0,c.usePathname)();(0,l.useEffect)(()=>{h(("admin"==o?[{key:"manage-database",title:"Manage Database",href:"/static/extract-metadata.html"},{key:"manage-users",title:"Manage Users",href:"/static/manage-users.html"},{key:"manage-tools",title:"Manage tools",href:"/static/manage-tools.html"},{key:"check-readiness",title:"Check Readiness",href:"/static/check-readiness.html"},{key:"align-model",title:"Align Model",href:"/static/align-model.html"},{key:"view-feedback",title:"View Feedback",href:"/static/view-feedback.html"},{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:k}]:o?[{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:k}]:[]).map(e=>(e.current=e.href==I,e)))},[o]);let[$,E]=(0,l.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,l.useEffect)(()=>{"/query-data"===I&&E("flex flex-col md:min-h-screen relative")},[I]),(0,n.jsxs)("div",{className:(0,d.m6)($,m),children:[v.length?(0,n.jsx)(s.l2,{rootClassNames:"border-b",items:v}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("div",{className:(0,d.m6)("grow",p),children:u})]})};t.Z=u},83271:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return eo}});var n=o(28598),l=o(82684),r=o(34376),i=o(42449),a=o(16496),s=o(46286),c=o(80128),d=o(4134),u=o(36189),m=o(22500);let p=(0,l.createContext)(null);function g({clientId:e,nonce:t,onScriptLoadSuccess:o,onScriptLoadError:n,children:r}){let i=function(e={}){let{nonce:t,onScriptLoadSuccess:o,onScriptLoadError:n}=e,[r,i]=(0,l.useState)(!1),a=(0,l.useRef)(o);a.current=o;let s=(0,l.useRef)(n);return s.current=n,(0,l.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;i(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;i(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),r}({nonce:t,onScriptLoadSuccess:o,onScriptLoadError:n}),a=(0,l.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:i}),[e,i]);return l.createElement(p.Provider,{value:a},r)}let f={large:40,medium:32,small:20};function v({onSuccess:e,onError:t,useOneTap:o,promptMomentNotification:n,type:r="standard",theme:i="outline",size:a="large",text:s,shape:c,logo_alignment:d,width:u,locale:m,click_listener:g,containerProps:v,...h}){let y=(0,l.useRef)(null),{clientId:b,scriptLoadedSuccessfully:w}=function(){let e=(0,l.useContext)(p);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),x=(0,l.useRef)(e);x.current=e;let k=(0,l.useRef)(t);k.current=t;let I=(0,l.useRef)(n);return I.current=n,(0,l.useEffect)(()=>{var e,t,n,l,p,f,v,$,E;if(w)return null===(n=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.initialize({client_id:b,callback:e=>{var t;if(!(null==e?void 0:e.credential))return null===(t=k.current)||void 0===t?void 0:t.call(k);let{credential:o,select_by:n}=e;x.current({credential:o,clientId:function(e){var t;let o=null!==(t=null==e?void 0:e.clientId)&&void 0!==t?t:null==e?void 0:e.client_id;return o}(e),select_by:n})},...h}),null===(f=null===(p=null===(l=null==window?void 0:window.google)||void 0===l?void 0:l.accounts)||void 0===p?void 0:p.id)||void 0===f||f.renderButton(y.current,{type:r,theme:i,size:a,text:s,shape:c,logo_alignment:d,width:u,locale:m,click_listener:g}),o&&(null===(E=null===($=null===(v=null==window?void 0:window.google)||void 0===v?void 0:v.accounts)||void 0===$?void 0:$.id)||void 0===E||E.prompt(I.current)),()=>{var e,t,n;o&&(null===(n=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===n||n.cancel())}},[b,w,o,r,i,a,s,c,d,u,m]),l.createElement("div",{...v,ref:y,style:{height:f[a],...null==v?void 0:v.style}})}var h=o(14007),y=o(16088),b=o(27289),w=o(37588),x=o(42178),k=o(68925),I=o.n(k),$=o(26981),E=o(75844),j=o(99195),S=o(81730),C=o(94980),_=o(20922),N=o(31875),O=o(18511);let Z=(e,t,o,n,l)=>({background:e,border:`${(0,_.unit)(n.lineWidth)} ${n.lineType} ${t}`,[`${l}-icon`]:{color:o}}),T=e=>{let{componentCls:t,motionDurationSlow:o,marginXS:n,marginSM:l,fontSize:r,fontSizeLG:i,lineHeight:a,borderRadiusLG:s,motionEaseInOutCirc:c,withDescriptionIconSize:d,colorText:u,colorTextHeading:m,withDescriptionPadding:p,defaultPadding:g}=e;return{[t]:Object.assign(Object.assign({},(0,N.Wf)(e)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:s,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:n,lineHeight:0},"&-description":{display:"none",fontSize:r,lineHeight:a},"&-message":{color:m},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${o} ${c}, opacity ${o} ${c},
        padding-top ${o} ${c}, padding-bottom ${o} ${c},
        margin-bottom ${o} ${c}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:p,[`${t}-icon`]:{marginInlineEnd:l,fontSize:d,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:n,color:m,fontSize:i},[`${t}-description`]:{display:"block",color:u}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},P=e=>{let{componentCls:t,colorSuccess:o,colorSuccessBorder:n,colorSuccessBg:l,colorWarning:r,colorWarningBorder:i,colorWarningBg:a,colorError:s,colorErrorBorder:c,colorErrorBg:d,colorInfo:u,colorInfoBorder:m,colorInfoBg:p}=e;return{[t]:{"&-success":Z(l,n,o,e,t),"&-info":Z(p,m,u,e,t),"&-warning":Z(a,i,r,e,t),"&-error":Object.assign(Object.assign({},Z(d,c,s,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},L=e=>{let{componentCls:t,iconCls:o,motionDurationMid:n,marginXS:l,fontSizeIcon:r,colorIcon:i,colorIconHover:a}=e;return{[t]:{"&-action":{marginInlineStart:l},[`${t}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:r,lineHeight:(0,_.unit)(r),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${o}-close`]:{color:i,transition:`color ${n}`,"&:hover":{color:a}}},"&-close-text":{color:i,transition:`color ${n}`,"&:hover":{color:a}}}}},R=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`});var M=(0,O.I$)("Alert",e=>[T(e),P(e),L(e)],R),D=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]]);return o};let A={success:h.Z,info:x.Z,error:y.Z,warning:w.Z},H=e=>{let{icon:t,prefixCls:o,type:n}=e,r=A[n]||null;return t?(0,S.wm)(t,l.createElement("span",{className:`${o}-icon`},t),()=>({className:I()(`${o}-icon`,{[t.props.className]:t.props.className})})):l.createElement(r,{className:`${o}-icon`})},G=e=>{let{isClosable:t,prefixCls:o,closeIcon:n,handleClose:r,ariaProps:i}=e,a=!0===n||void 0===n?l.createElement(b.Z,null):n;return t?l.createElement("button",Object.assign({type:"button",onClick:r,className:`${o}-close-icon`,tabIndex:0},i),a):null},U=l.forwardRef((e,t)=>{let{description:o,prefixCls:n,message:r,banner:i,className:a,rootClassName:s,style:c,onMouseEnter:d,onMouseLeave:u,onClick:m,afterClose:p,showIcon:g,closable:f,closeText:v,closeIcon:h,action:y,id:b}=e,w=D(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[x,k]=l.useState(!1),S=l.useRef(null);l.useImperativeHandle(t,()=>({nativeElement:S.current}));let{getPrefixCls:_,direction:N,alert:O}=l.useContext(C.E_),Z=_("alert",n),[T,P,L]=M(Z),R=t=>{var o;k(!0),null===(o=e.onClose)||void 0===o||o.call(e,t)},A=l.useMemo(()=>void 0!==e.type?e.type:i?"warning":"info",[e.type,i]),U=l.useMemo(()=>"object"==typeof f&&!!f.closeIcon||!!v||("boolean"==typeof f?f:!1!==h&&null!=h||!!(null==O?void 0:O.closable)),[v,h,f,null==O?void 0:O.closable]),z=!!i&&void 0===g||g,B=I()(Z,`${Z}-${A}`,{[`${Z}-with-description`]:!!o,[`${Z}-no-icon`]:!z,[`${Z}-banner`]:!!i,[`${Z}-rtl`]:"rtl"===N},null==O?void 0:O.className,a,s,L,P),W=(0,E.Z)(w,{aria:!0,data:!0}),F=l.useMemo(()=>{var e,t;return"object"==typeof f&&f.closeIcon?f.closeIcon:v||(void 0!==h?h:"object"==typeof(null==O?void 0:O.closable)&&(null===(e=null==O?void 0:O.closable)||void 0===e?void 0:e.closeIcon)?null===(t=null==O?void 0:O.closable)||void 0===t?void 0:t.closeIcon:null==O?void 0:O.closeIcon)},[h,f,v,null==O?void 0:O.closeIcon]),q=l.useMemo(()=>{let e=null!=f?f:null==O?void 0:O.closable;if("object"==typeof e){let{closeIcon:t}=e,o=D(e,["closeIcon"]);return o}return{}},[f,null==O?void 0:O.closable]);return T(l.createElement($.default,{visible:!x,motionName:`${Z}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:p},(t,n)=>{let{className:i,style:a}=t;return l.createElement("div",Object.assign({id:b,ref:(0,j.sQ)(S,n),"data-show":!x,className:I()(B,i),style:Object.assign(Object.assign(Object.assign({},null==O?void 0:O.style),c),a),onMouseEnter:d,onMouseLeave:u,onClick:m,role:"alert"},W),z?l.createElement(H,{description:o,icon:e.icon,prefixCls:Z,type:A}):null,l.createElement("div",{className:`${Z}-content`},r?l.createElement("div",{className:`${Z}-message`},r):null,o?l.createElement("div",{className:`${Z}-description`},o):null),y?l.createElement("div",{className:`${Z}-action`},y):null,l.createElement(G,{isClosable:U,prefixCls:Z,closeIcon:F,handleClose:R,ariaProps:q}))}))});var z=o(6223),B=o(79427),W=o(63382),F=o(77536),q=o(58783),X=o(34766);let Q=function(e){function t(){var e,o,n;return(0,z.Z)(this,t),o=t,n=arguments,o=(0,W.Z)(o),(e=(0,q.Z)(this,(0,F.Z)()?Reflect.construct(o,n||[],(0,W.Z)(this).constructor):o.apply(this,n))).state={error:void 0,info:{componentStack:""}},e}return(0,X.Z)(t,e),(0,B.Z)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){let{message:e,description:t,id:o,children:n}=this.props,{error:r,info:i}=this.state,a=(null==i?void 0:i.componentStack)||null,s=void 0===e?(r||"").toString():e;return r?l.createElement(U,{id:o,type:"error",message:s,description:l.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},void 0===t?a:t)}):n}}])}(l.Component),J=U;J.ErrorBoundary=Q;var V=o(93146),K=o(48497);let Y=K.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"REPLACE_WITH_GOOGLE_CLIENT_ID",ee=()=>{let[e,t]=(0,l.useContext)(u.S),o=(0,r.useRouter)(),i=async e=>{console.log("Login Success: ",e);let n=await fetch((0,V.Z)("http","login_google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e.credential})});if(n.ok){let l=await n.json();l.error&&(console.error(l.error),a.ZP.error(l.error)),"success"===l.status&&(t({user:l.user_email,token:l.token,userType:l.user_type}),localStorage.setItem("defogUser",l.user_email),localStorage.setItem("defogToken",l.token),localStorage.setItem("defogUserType",l.user_type),o.push("/"))}},s=e=>{console.error("Login Failed: ",e)};return(0,n.jsx)("div",{children:(0,n.jsx)(g,{clientId:Y,children:(0,n.jsx)(v,{buttonText:"Log In with Google",onSuccess:i,onFailure:s,cookiePolicy:"single_host_origin"})})})},et=()=>{let[e,t]=(0,l.useContext)(u.S),o=(0,r.useRouter)(),p=async e=>{console.log("test");let n=await fetch("http://localhost:33364/login",{method:"POST",body:JSON.stringify(e)}),l=await n.json();"success"===l.status?(t({user:e.username,token:l.token,userType:l.user_type}),localStorage.setItem("defogUser",e.username),localStorage.setItem("defogToken",l.token),localStorage.setItem("defogUserType",l.user_type),o.push("/static/extract-metadata.html")):a.ZP.error("Login failed. Please contact your administrator.")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{}),(0,n.jsxs)(m.Z,{children:[(0,n.jsx)("h1",{style:{paddingBottom:"1em"},children:"Welcome to Defog!"}),(0,n.jsxs)(s.Z,{labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:800},onFinish:p,children:[(0,n.jsx)(s.Z.Item,{label:"Username",name:"username",children:(0,n.jsx)(c.Z,{})}),(0,n.jsx)(s.Z.Item,{label:"Password",name:"password",children:(0,n.jsx)(c.Z.Password,{})}),(0,n.jsx)(s.Z.Item,{children:(0,n.jsx)(d.ZP,{type:"primary",htmlType:"submit",children:"Log In"})})]}),(0,n.jsx)(ee,{})]})]})};var eo=et},93146:function(e,t){"use strict";let o=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log("http://localhost:33364"),""!==t)?"ws"===e?"".concat("http://localhost:33364".replace("http","ws"),"/").concat(t):"".concat("http://localhost:33364","/").concat(t):"".concat("http://localhost:33364")};t.Z=o}},function(e){e.O(0,[435,919,412,629,592,286,774,888,179],function(){return e(e.s=13831)}),_N_E=e.O()}]);