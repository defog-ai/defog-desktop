(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{91012:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-tools",function(){return o(51754)}])},31143:function(e,t,o){"use strict";var l=o(28598),n=o(1887),a=o.n(n);t.Z=()=>(0,l.jsxs)(a(),{children:[(0,l.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,l.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},62429:function(e,t,o){"use strict";var l=o(28598),n=o(82684),a=o(91568),r=o(79869),s=o(34376),i=o(89971),c=o(12691),d=o.n(c);t.Z=e=>{let{id:t,userType:o,children:c}=e,{Content:u,Sider:m}=r.Layout,[h,x]=(0,n.useState)([]),[g,f]=(0,n.useContext)(a._),p=(0,s.useRouter)(),redirect=e=>{"/"===e||e.endsWith(".html")||(e+=".html"),e="/static"+e,p.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),f({user:null,token:null,userType:null}),redirect("/log-in")};return(0,n.useEffect)(()=>{x("admin"==o?[{key:"manage-database",title:"Manage Database",icon:(0,l.jsxs)("a",{onClick:()=>redirect("/extract-metadata"),children:[(0,l.jsx)("p",{className:"mr-2",children:"\uD83D\uDCBE"}),"Manage DB"]})},{key:"manage-users",title:"Manage Users",icon:(0,l.jsxs)("a",{onClick:()=>redirect("/manage-users"),children:[(0,l.jsx)("p",{className:"mr-2",children:"\uD83D\uDD10"}),"Manage Users"]})},{key:"view-notebooks",title:"View your notebook",icon:(0,l.jsxs)("a",{onClick:()=>redirect("/view-notebooks"),children:[(0,l.jsx)("p",{className:"mr-2",children:"\uD83D\uDCD2"}),"Your Notebooks"]})},{key:"manage-tools",title:"Manage tools",icon:(0,l.jsxs)("a",{onClick:()=>redirect("/manage-tools"),children:[(0,l.jsx)("p",{className:"mr-2",children:(0,l.jsx)(i.pyo,{})}),"Manage tools"]})},{key:"check-readiness",title:"Check Readiness",icon:(0,l.jsx)("a",{onClick:()=>redirect("/check-readiness"),children:(0,l.jsx)("p",{className:"mr-2",children:"✅ Check Readiness"})})},{key:"align-model",title:"Align Model",icon:(0,l.jsx)("a",{onClick:()=>redirect("/align-model"),children:(0,l.jsx)("p",{className:"mr-2",children:"⚙️ Align Model"})})},{key:"query-data",title:"Query Data",icon:(0,l.jsx)("a",{onClick:()=>redirect("/query-data"),children:(0,l.jsx)("p",{className:"mr-2",children:"\uD83D\uDD0D Query Data"})})},{key:"logout",title:"Logout",icon:(0,l.jsxs)("a",{onClick:logout,children:[(0,l.jsx)("p",{className:"mr-2",children:"↪"})," Logout"]})}]:o?[{key:"view-notebooks",title:"View your notebook",icon:(0,l.jsx)("a",{onClick:()=>redirect("/view-notebooks"),children:"Your Notebooks"})},{key:"query-data",title:"Query Data",icon:(0,l.jsx)(d(),{href:"/query-data",children:"\uD83D\uDD0D Query Data"})},{key:"logout",title:"Logout",icon:(0,l.jsx)("a",{onClick:()=>redirect("/manage-tools"),children:"Logout"})}]:[])},[o]),(0,l.jsx)(r.Layout,{style:{height:"100vh"},children:(0,l.jsxs)(u,{children:[h.length?(0,l.jsx)(m,{style:{height:"100vh",position:"fixed"},children:(0,l.jsx)(r.v2,{style:{width:200,paddingTop:"2em",paddingBottom:"2em"},mode:"inline",selectedKeys:[t],items:h})}):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)("div",{style:{paddingLeft:240,paddingTop:30,backgroundColor:"#f5f5f5"},children:c})]})})}},51754:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return ManageTools}});var l=o(28598),n=o(22399),a=o(18953),r=o(60516),s=o(31143),i=o(62429),c=o(89199),d=o(82684);let u=d.forwardRef(function({title:e,titleId:t,...o},l){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},o),e?d.createElement("title",{id:t},e):null,d.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))});var m=o(56572);function Input(e){let{value:t=null,label:o=null,type:n="text",status:a=null,disabled:r=!1,rootClassName:s="",placeholder:i="Enter text here",id:c="",name:d="text-input",onChange:h=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o]},onPressEnter:x=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o]},inputHtmlProps:g={},inputClassName:f=""}=e;return(0,l.jsxs)("div",{className:(0,m.m6)("text-gray-600",s),children:[o&&(0,l.jsx)("label",{htmlFor:d,className:"block text-xs mb-2 font-light text-gray-600",children:o}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)("input",{type:n,name:d,id:c,className:(0,m.m6)("block w-full focus:shadow-sm rounded-md border-0 py-1.5 pr-10 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset","error"!==a?"focus:ring-blue-400":"focus:ring-rose-400 ring-rose-400","sm:text-sm sm:leading-6",r?"bg-gray-100 text-gray-400  focus:ring-gray-100 cursor-not-allowed":"bg-white",f),placeholder:i,"aria-invalid":"true","aria-describedby":"email-error",value:t,disabled:r,onChange:e=>{r||h(e)},onKeyDown:e=>{r||"Enter"!==e.key||x(e)},...g}),"error"===a&&(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)(u,{className:"h-5 w-5 stroke-rose-400 text-transparent","aria-hidden":"true"})})]})]})}function TextArea(e){let{value:t="",status:o=null,label:n=null,disabled:a=!1,rootClassName:r="",placeholder:s="Enter text here",id:i="",name:c="text-input",onChange:d=()=>{},textAreaHtmlProps:h={}}=e;return(0,l.jsxs)("div",{className:(0,m.m6)("text-gray-600",r),children:[n&&(0,l.jsx)("label",{htmlFor:c,className:"block text-xs mb-2 font-light",children:n}),(0,l.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)("textarea",{disabled:a,rows:4,name:c,id:i,placeholder:s,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset"+o!="error"?"focus:ring-blue-400":"focus:ring-rose-400 ring-rose-400sm:text-sm sm:leading-6",value:t,onChange:d,...h})}),"error"===o&&(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)(u,{className:"h-5 w-5 stroke-rose-400 text-transparent","aria-hidden":"true"})})]})]})}function DefineTool(e){let{toolName:t,setToolName:o,toolDocString:n,setToolDocString:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)(Input,{label:"Tool name",type:"text",rootClassName:"mb-4 text-gray-600 ",placeholder:"Give your tool a name",status:t?"":"error",onChange:e=>o(e.target.value),value:t}),(0,l.jsx)(TextArea,{label:"Description",placeholder:"What does this tool do?",status:n?"":"error",onChange:e=>a(e.target.value),value:n})]})})}o(5237);var h=o(79204);function SpinningLoader(e){let{fill:t="text-white"}=e;return(0,l.jsxs)("svg",{className:(0,m.m6)("animate-spin inline mr-3 h-5 w-5",t),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}let x=d.forwardRef(function({title:e,titleId:t,...o},l){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},o),e?d.createElement("title",{id:t},e):null,d.createElement("path",{fillRule:"evenodd",d:"M1 5.25A2.25 2.25 0 0 1 3.25 3h13.5A2.25 2.25 0 0 1 19 5.25v9.5A2.25 2.25 0 0 1 16.75 17H3.25A2.25 2.25 0 0 1 1 14.75v-9.5Zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75v-2.69l-2.22-2.219a.75.75 0 0 0-1.06 0l-1.91 1.909.47.47a.75.75 0 1 1-1.06 1.06L6.53 8.091a.75.75 0 0 0-1.06 0l-2.97 2.97ZM12 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))});var g=o(76174);function ToolEditorInput(e){let{input:t,name:o=null,onClick:n=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o]},isTable:a=!1,isImage:r=!1}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-sm rounded-t-md font-semibold text-gray-900 p-1 bg-gray-100 mb-1",children:o||t.name}),(0,l.jsx)("div",{className:"p-1 grow",children:a?(0,l.jsx)("div",{className:"p-2 bg-blue-50 h-full hover:bg-blue-100 group shadow-inner grid grid-cols-4 gap-1 grid-rows-2 rounded-md border-gray-100 cursor-pointer",onClick:()=>n(t),children:(0,g.w6H)(0,8).map((e,t)=>(0,l.jsx)("div",{className:"bg-blue-100 group-hover:bg-blue-200"},t))}):r?(0,l.jsx)("div",{className:"h-full",children:(0,l.jsx)(x,{onClick:()=>n(t),className:"w-full text-blue-50 cursor-pointer hover:text-blue-200"})}):(0,l.jsx)("div",{className:"px-1",children:(0,l.jsx)("div",{className:"text-sm text-gray-500",children:t.value+""})})})]})}var f=o(30972);let p=d.forwardRef(function({title:e,titleId:t,...o},l){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},o),e?d.createElement("title",{id:t},e):null,d.createElement("path",{fillRule:"evenodd",d:"M4.25 2A2.25 2.25 0 0 0 2 4.25v11.5A2.25 2.25 0 0 0 4.25 18h11.5A2.25 2.25 0 0 0 18 15.75V4.25A2.25 2.25 0 0 0 15.75 2H4.25Zm4.03 6.28a.75.75 0 0 0-1.06-1.06L4.97 9.47a.75.75 0 0 0 0 1.06l2.25 2.25a.75.75 0 0 0 1.06-1.06L6.56 10l1.72-1.72Zm4.5-1.06a.75.75 0 1 0-1.06 1.06L13.44 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06l2.25-2.25a.75.75 0 0 0 0-1.06l-2.25-2.25Z",clipRule:"evenodd"}))});var b=o(14299),j=o(50701),v=o(90079);function ToolCodeEditor(e){let{toolCode:t,className:o="",editable:n=!1}=e,a=(0,d.useRef)(null);return(0,l.jsx)(j.ZP,{ref:a,className:(0,m.m6)("*:outline-0 *:focus:outline-0",o),value:t,editable:n,extensions:[(0,b.Vs)(),v.tk.lineWrapping],basicSetup:{lineNumbers:!1,highlightActiveLine:!1}})}function ToolFlow(e){let{toolName:t,testingResults:o,code:a}=e,r=(0,d.useRef)(null),s=(0,d.useRef)(null),i=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,m]=(0,d.useState)(null),h=(0,d.useCallback)(()=>{if(!r.current||!s.current||!i.current||!c.current)return;let e=r.current.childNodes,t=s.current.childNodes,o=i.current,l=c.current,n=l.getBoundingClientRect();l.innerHTML="";let a=Array.from(e).map(e=>{let t=e.getBoundingClientRect();return{x:t.right-n.left,y:t.top-n.top+t.height/2}}),d=Array.from(t).map(e=>{let t=e.getBoundingClientRect();return{x:t.left-n.left,y:t.top-n.top+t.height/2}}),u=o.getBoundingClientRect(),m={x:u.left-n.left,y:u.top-n.top+u.height/2,width:u.width};a.forEach((e,t)=>{let o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M ".concat(e.x," ").concat(e.y," C ").concat(e.x+100," ").concat(e.y," ").concat(m.x-100," ").concat(m.y," ").concat(m.x," ").concat(m.y)),o.setAttribute("stroke","black"),o.setAttribute("fill","transparent"),l.appendChild(o)}),d.forEach((e,t)=>{let o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M ".concat(m.x+m.width," ").concat(m.y," C ").concat(m.x+100," ").concat(m.y," ").concat(e.x-100," ").concat(e.y," ").concat(e.x," ").concat(e.y)),o.setAttribute("stroke","black"),o.setAttribute("fill","transparent"),l.appendChild(o)})},[]);return(0,d.useEffect)(()=>{h()},[o]),(0,d.useEffect)(()=>(window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[]),(0,l.jsxs)(l.Fragment,{children:[u&&(0,l.jsxs)(n.default,{open:u,onCancel:()=>m(null),onOk:()=>m(null),title:u.type.toUpperCase(),children:["table"===u.type&&(0,l.jsx)(f.Z,{rows:u.data,columns:u.columns,skipColumns:["index"],rootClassName:"w-full h-96 border border-gray-200 px-1"}),"image"===u.type&&(0,l.jsx)("img",{src:"data:image/png;base64,".concat(u.data),alt:"chart"}),"code"===u.type&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ToolCodeEditor,{toolCode:u.code,className:"h-96 overflow-scroll"})})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center h-80vh justify-between",children:[(0,l.jsx)("div",{className:"absolute left-0 right-0 w-full h-full pointer-events-none",children:(0,l.jsx)("svg",{ref:c,width:"100%",height:"100%"})}),(0,l.jsx)("div",{className:"flex flex-col overflow-auto justify-center items-start z-10",ref:r,children:o.inputs.map((e,t)=>(0,l.jsx)("div",{className:"flex flex-col m-4 rounded-md min-w-20 h-20 border shadow-sm",children:(0,l.jsx)(ToolEditorInput,{input:e,onClick:e=>m({type:"table",...e.parsed}),isTable:e.type.indexOf("DataFrame")>-1})},t))}),(0,l.jsxs)("div",{className:"font-bold flex flex-row items-center ",ref:i,children:[(0,l.jsx)("div",{className:"rounded-md bg-blue-500 text-white p-1 px-2 ",children:t}),(0,l.jsx)(p,{className:"h-6 w-6 inline-block ml-2 text-blue-200 cursor-pointer hover:text-blue-400 z-20 bg-white",onClick:()=>m({type:"code",code:a})})]}),(0,l.jsx)("div",{className:"flex flex-col",ref:s,children:o.outputs.map((e,t)=>{var o;return(0,l.jsxs)("div",{className:"flex flex-row m-4",children:[(0,l.jsx)("div",{className:"flex flex-col m-4 min-w-20 h-20 rounded-md border shadow-sm",children:e.data&&e.parsed&&(0,l.jsx)(ToolEditorInput,{name:"Table",isTable:!0,input:e,onClick:e=>m({type:"table",...e.parsed})})}),(null==e?void 0:null===(o=e.chart_images)||void 0===o?void 0:o.length)?(0,l.jsx)("div",{className:"m-4 w-20 rounded-md border shadow-sm",children:e.chart_images.map(e=>(0,l.jsx)(ToolEditorInput,{name:"Image",isImage:!0,input:e,onClick:e=>{console.log(e),m({type:"image",data:e.data})}},e.data))}):(0,l.jsx)(l.Fragment,{})]},t)})})]})]})}let y=(0,h.Z)("http","generate_tool_code");function ToolEditor(e){let{tool:t={code:"",description:"",function_name:"",input_metadata:{},output_metadata:[],tool_name:"",toolbox:""},onAddTool:o=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o]}}=e,[s,i]=(0,d.useState)(t.tool_name),[u,h]=(0,d.useState)(t.description),[x,g]=(0,d.useState)(!1),[f,p]=(0,d.useState)(),[b,j]=(0,d.useState)(t.function_name),[v,w]=(0,d.useState)(),[N,k]=(0,d.useState)(!1),handleSubmit=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;g(!0);try{let t=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:s,tool_description:u,user_question:e,current_code:f||null})}).then(e=>e.json());if(!t.success)throw Error("Failed to generate tool code"+t.error_message);console.log(t),p(t.generated_code),j(t.function_name),t.testing_results.inputs.forEach(e=>{-1!==e.type.indexOf("DataFrame")&&(e.parsed=(0,c.IR)(e.value))}),t.testing_results.outputs.forEach(e=>{e.data&&(e.parsed=(0,c.IR)(e.data))}),console.log(t.testing_results),w(t.testing_results)}catch(e){console.error(e)}finally{g(!1)}},C=(0,d.useCallback)(async()=>{g(!0);try{let e={tool_name:s,function_name:b,description:u,code:f,input_metadata:(0,c.Ov)(v.inputs,"name",["name","description","type"]),output_metadata:v.outputs.map(e=>({name:"output_df",description:"pandas df",type:"pandas.core.frame.DataFrame"})),toolbox:t.toolbox},l=await (0,c.LK)(e);l.success?(a.default.success("Tool added successfully"),o(e),k(!1)):a.default.error("Failed to submit tool"+l.error_message)}catch(e){console.error(e),a.default.error("Failed to submit tool"+e.message)}finally{g(!1)}},[v,u,s,b,f,t.toolbox,o]);return(0,l.jsxs)(l.Fragment,{children:[!f&&!v&&!x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-8/12 h-5/6 *:font-mono",children:(0,l.jsx)(DefineTool,{toolName:s,setToolName:i,toolDocString:u,setToolDocString:h})}),(0,l.jsx)(r.z,{className:(0,m.m6)("p-2 mt-6 text-sm border",""===s||""===u||x?"bg-gray-50 text-gray-300 hover:bg-gray-50 cursor-not-allowed":""),onClick:()=>{if(""===s||""===u){a.default.error("Please fill in the tool name and description");return}handleSubmit()},children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(SpinningLoader,{fill:"text-gray-300"}),"Generating"]}):"Generate"})]}),v&&!x&&(0,l.jsx)(ToolFlow,{toolName:s,testingResults:v,code:f}),x&&(0,l.jsxs)("div",{className:"flex flex-row items-center h-80vh justify-center",children:[(0,l.jsx)(SpinningLoader,{fill:"text-gray-400"}),"Generating"]}),v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Input,{placeholder:"What should we change?",inputClassName:(0,m.m6)("bg-white absolute mx-auto left-0 right-0 border-2 border-gray-400 bottom-0 p-2 rounded-lg w-full lg:w-6/12 mx-auto h-16 shadow-sm hover:border-blue-500 focus:border-blue-500",x?"hover:border-gray-400 focus:border-gray-400":""),disabled:x,onPressEnter:e=>{if(!e.target.value){a.default.error("Can't be blank!");return}handleSubmit(e.target.value)}}),(0,l.jsx)("div",{className:"flex flex-row justify-end absolute bottom-8 right-10",children:(0,l.jsx)(r.z,{disabled:x,className:"px-2 py-2 text-md",onClick:()=>k(!0),children:"Add"})})]}),N&&(0,l.jsxs)(n.default,{open:N,onCancel:()=>k(!1),confirmLoading:x,onOk:async()=>{C()},title:"Submit your Tool",children:[(0,l.jsx)("h1",{children:"Confirm that the description and name reflect what the tool does"}),(0,l.jsx)(DefineTool,{toolName:s,setToolName:i,toolDocString:u,setToolDocString:h})]})]})}function AddTool(e){let{toolbox:t,onAddTool:o=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o]}}=e,[a,r]=(0,d.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"tool rounded mr-3 mb-3  bg-blue-50 border border-blue-400 flex items-center p-3 cursor-pointer hover:shadow-lg",onClick:()=>r(!0),children:(0,l.jsx)("div",{className:"flex items-center  justify-center text-blue-500",children:(0,l.jsx)("span",{className:"",children:(0,l.jsx)("p",{className:"m-0",children:"+"})})})}),(0,l.jsx)(n.default,{open:a,onCancel:e=>{e.preventDefault(),e.stopPropagation(),r(null)},footer:null,centered:!0,className:"w-8/12",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-lg font-bold mb-4",children:["Add a tool to the ",c.JM[t]," toolbox"]}),(0,l.jsx)(ToolEditor,{tool:{toolbox:t},onAddTool:o})]})})]})}function Tabs(e){let{tabs:t=[],defaultSelected:o=null}=e,[n,a]=(0,d.useState)(o&&t.find(e=>e.name===o)||t[0]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"tab-group mb-5",children:[(0,l.jsxs)("div",{className:"sm:hidden",children:[(0,l.jsx)("label",{htmlFor:"tabs",className:"sr-only",children:"Select a tab"}),(0,l.jsx)("select",{id:"tabs",name:"tabs",className:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",defaultValue:o,children:t.map(e=>(0,l.jsx)("option",{onClick:()=>{a(e)},children:e.name},e.name))})]}),(0,l.jsx)("div",{className:"hidden sm:block",children:(0,l.jsx)("nav",{className:"isolate flex divide-x divide-gray-200 rounded-lg shadow","aria-label":"Tabs",children:t.map((e,o)=>(0,l.jsxs)("div",{className:(0,m.m6)(n.name===e.name?"text-gray-900":"text-gray-500 hover:text-gray-700",0===o?"rounded-l-lg":"",o===t.length-1?"rounded-r-lg":"","group relative min-w-0 flex-1 overflow-hidden bg-white py-4 px-4 text-center text-sm font-medium hover:bg-gray-50 focus:z-10"),onClick:()=>{a(e)},"aria-current":n.name===e.name?"page":void 0,children:[(0,l.jsx)("span",{children:e.name}),(0,l.jsx)("span",{"aria-hidden":"true",className:(0,m.m6)(n.name===e.name?"bg-indigo-500":"bg-transparent","absolute inset-x-0 bottom-0 h-0.5")})]},e.name))})})]}),(0,l.jsx)("div",{className:"tab-content",children:(null==n?void 0:n.content)||(0,l.jsx)(l.Fragment,{})})]})}let w=(0,h.Z)("http","toggle_disable_tool"),N=(0,h.Z)("http","delete_tool");function ManageTools(){let[e,t]=(0,d.useState)(null),o=(0,d.useMemo)(()=>{if(e){let t={};return Object.values(e).forEach(e=>{t[e.toolbox]||(t[e.toolbox]={}),t[e.toolbox][e.function_name]=e}),t}return null},[e]);console.log(e,o);let[u,m]=(0,d.useState)(null),onAddTool=o=>{t({...e,[o.function_name]:o})};return(0,d.useEffect)(()=>{(async function(){let e=await fetch((0,h.Z)("http","get_user_tools"),{method:"POST"}),o=(await e.json()).tools;t(o)})()},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Z,{}),(0,l.jsx)(i.Z,{id:"add-tools",userType:"admin",children:e&&o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{open:!!u,onCancel:e=>{e.preventDefault(),e.stopPropagation(),m(null)},centered:!0,footer:null,className:"w-10/12 overflow-scroll h-[90%]",children:u?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex border-b bg-gray-100 p-2 rounded-t-md",children:[(0,l.jsxs)("div",{className:"grow",children:[(0,l.jsx)(Tabs,{}),(0,l.jsx)("h1",{className:"text-lg mb-2",children:e[u].tool_name}),(0,l.jsxs)("div",{className:"tool-tags",children:[e[u].cannot_disable?(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Cannot disable"}):e[u].disabled?(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Disabled"}):(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-teal-500 py-1 text-xs",children:"Enabled"}),e[u].cannot_delete&&(0,l.jsx)("span",{className:"rounded-md font-mono mr-3 text-gray-400 py-1 text-xs",children:"Cannot delete"})]})]}),(0,l.jsxs)("div",{className:"tool-actions flex flex-col gap-2 self-center",children:[!e[u].cannot_disable&&(0,l.jsx)(r.z,{className:"font-mono bg-gray-50 border border-gray-200 text-gray-500 hover:bg-blue-500 hover:text-white",onClick:async()=>{let o=e[u].disabled?"enabled":"disabled",l=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({function_name:e[u].function_name})}).then(e=>e.json());l.success?(a.default.success("Tool ".concat(u," is now ").concat(o)),t(e=>{let t={...e};return t[u].disabled=!t[u].disabled,t})):a.default.error("Failed to ".concat(o.slice(0,-1)," tool. ").concat(l.error_message?"Error: "+l.error_message:""))},children:e[u].disabled?"Enable":"Disable"}),!e[u].cannot_delete&&(0,l.jsx)(r.z,{className:"font-mono bg-gray-50 border border-gray-200 text-gray-500 hover:bg-rose-500 hover:text-white",onClick:async()=>{let o=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({function_name:e[u].function_name})}).then(e=>e.json());o.success?(a.default.success("Tool ".concat(u," is now deleted")),t(e=>{let t={...e};return delete t[u],t}),m(null)):a.default.error("Failed to delete tool. ".concat(o.error_message?"Error: "+o.error_message:""))},children:"Delete"})]})]}),(0,l.jsx)("div",{className:"mt-4 p-2",children:(0,l.jsx)(ToolEditor,{tool:e[u]})})]}):"Please select a tool"},u),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Tool management"}),(0,l.jsx)("div",{className:"tool-list",children:Object.keys(o).map(t=>(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-md font-bold mb-4",children:c.JM[t]}),(0,l.jsxs)("div",{className:"toolbox flex flex-wrap flex-row mb-10",children:[Object.keys(o[t]).map(t=>(0,l.jsx)("div",{className:"tool rounded mr-3 mb-3 bg-gray-50 border border-gray-400 p-3 w-60 cursor-pointer hover:shadow-lg",onClick:()=>m(t),children:(0,l.jsx)("div",{className:"tool-name text-md",children:e[t].tool_name})},t)),(0,l.jsx)(AddTool,{toolbox:t,onAddTool:onAddTool})]})]},t))})]})]}):(0,l.jsx)("div",{children:"Fetching your tools..."})})]})}},79204:function(e,t){"use strict";t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==t?"ws"===e?"".concat("http://localhost:33364".replace("http","ws"),"/").concat(t):"".concat("http://localhost:33364","/").concat(t):"".concat("http://localhost:33364")}}},function(e){e.O(0,[665,762,958,664,680,200,774,888,179],function(){return e(e.s=91012)}),_N_E=e.O()}]);