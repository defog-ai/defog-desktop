(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{65313:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/check-readiness",function(){return n(58487)}])},31143:function(e,t,n){"use strict";var s=n(28598),i=n(1887),o=n.n(i);t.Z=()=>(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,s.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},62429:function(e,t,n){"use strict";var s=n(28598),i=n(82684),o=n(91568),a=n(79869),l=n(34376),r=n(89971),c=n(12691),d=n.n(c);t.Z=e=>{let{id:t,userType:n,children:c}=e,{Content:u,Sider:h}=a.Layout,[g,p]=(0,i.useState)([]),[x,m]=(0,i.useContext)(o._),j=(0,l.useRouter)(),redirect=e=>{"/"===e||e.endsWith(".html")||(e+=".html"),e="/static"+e,j.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),m({user:null,token:null,userType:null}),redirect("/log-in")};return(0,i.useEffect)(()=>{p("admin"==n?[{key:"manage-database",title:"Manage Database",icon:(0,s.jsxs)("a",{onClick:()=>redirect("/extract-metadata"),children:[(0,s.jsx)("p",{className:"mr-2",children:"\uD83D\uDCBE"}),"Manage DB"]})},{key:"manage-users",title:"Manage Users",icon:(0,s.jsxs)("a",{onClick:()=>redirect("/manage-users"),children:[(0,s.jsx)("p",{className:"mr-2",children:"\uD83D\uDD10"}),"Manage Users"]})},{key:"view-notebooks",title:"View your notebook",icon:(0,s.jsxs)("a",{onClick:()=>redirect("/view-notebooks"),children:[(0,s.jsx)("p",{className:"mr-2",children:"\uD83D\uDCD2"}),"Your Notebooks"]})},{key:"manage-tools",title:"Manage tools",icon:(0,s.jsxs)("a",{onClick:()=>redirect("/manage-tools"),children:[(0,s.jsx)("p",{className:"mr-2",children:(0,s.jsx)(r.pyo,{})}),"Manage tools"]})},{key:"check-readiness",title:"Check Readiness",icon:(0,s.jsx)("a",{onClick:()=>redirect("/check-readiness"),children:(0,s.jsx)("p",{className:"mr-2",children:"✅ Check Readiness"})})},{key:"align-model",title:"Align Model",icon:(0,s.jsx)("a",{onClick:()=>redirect("/align-model"),children:(0,s.jsx)("p",{className:"mr-2",children:"⚙️ Align Model"})})},{key:"query-data",title:"Query Data",icon:(0,s.jsx)("a",{onClick:()=>redirect("/query-data"),children:(0,s.jsx)("p",{className:"mr-2",children:"\uD83D\uDD0D Query Data"})})},{key:"logout",title:"Logout",icon:(0,s.jsxs)("a",{onClick:logout,children:[(0,s.jsx)("p",{className:"mr-2",children:"↪"})," Logout"]})}]:n?[{key:"view-notebooks",title:"View your notebook",icon:(0,s.jsx)("a",{onClick:()=>redirect("/view-notebooks"),children:"Your Notebooks"})},{key:"query-data",title:"Query Data",icon:(0,s.jsx)(d(),{href:"/query-data",children:"\uD83D\uDD0D Query Data"})},{key:"logout",title:"Logout",icon:(0,s.jsx)("a",{onClick:()=>redirect("/manage-tools"),children:"Logout"})}]:[])},[n]),(0,s.jsx)(a.Layout,{style:{height:"100vh"},children:(0,s.jsxs)(u,{children:[g.length?(0,s.jsx)(h,{style:{height:"100vh",position:"fixed"},children:(0,s.jsx)(a.v2,{style:{width:200,paddingTop:"2em",paddingBottom:"2em"},mode:"inline",selectedKeys:[t],items:g})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{style:{paddingLeft:240,paddingTop:30,backgroundColor:"#f5f5f5"},children:c})]})})}},58487:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return check_readiness}});var s=n(28598),i=n(82684),o=n(31143),a=n(62429),l=n(79869),Tooltip=e=>{let{tooltipText:t,mainText:n}=e;return(0,s.jsx)(l.u,{title:t,children:(0,s.jsx)("span",{children:n})})},r=n(37490),c=n(92696),d=n(35575),u=n(20259),h=n.n(u),g=n(18953),p=n(79204),check_readiness=()=>{let[e,t]=(0,i.useState)(!1),[n,l]=(0,i.useState)(""),[u,x]=(0,i.useState)(!1),[m,j]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),[f,_]=(0,i.useState)(0),[C,T]=(0,i.useState)(0),[S,w]=(0,i.useState)(0),[D,v]=(0,i.useState)([]),[b,q]=(0,i.useState)(""),[N,Q]=(0,i.useState)([]),[I,G]=(0,i.useState)([]),[E,O]=(0,i.useState)(0),[M,Z]=(0,i.useState)(0),[L,P]=(0,i.useState)(0),[A,U]=(0,i.useState)(0),[B,R]=(0,i.useState)([]),checkBasicReadiness=async()=>{let e;if(localStorage.getItem("defogToken"))e=localStorage.getItem("defogToken");else{g.default.error("Please login to continue");return}t(!0);let n=await fetch((0,p.Z)("http","readiness/basic"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),s=await n.json();s.success?(t(!1),x(s.metadata),j(s.golden_queries),k(s.glossary)):(t(!1),g.default.error("An error occurred while checking if your metadata was adequately added."))},checkGoldenQueriesValidity=async()=>{t(!0);let e=await fetch((0,p.Z)("http","readiness/check_golden_queries_validity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})}),s=await e.json();t(!1),_(s.total_golden_queries),w(s.invalid_golden_queries_count),T(s.total_golden_queries-s.invalid_golden_queries_count),v([...s.invalid_golden_queries]),console.log(s)},checkInstructionConsistency=async()=>{t(!0);let e=await fetch((0,p.Z)("http","readiness/check_instruction_consistency"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})}),s=await e.json();q(s.message),Q([...s.inconsistent_glossary_lines]),G([...s.reasons_for_inconsistency]),t(!1),console.log(s)},checkGoldenQueryCoverage=async()=>{t(!0);let e=await fetch((0,p.Z)("http","readiness/check_golden_query_coverage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})}),s=await e.json();O(s.num_total_tables),Z(s.num_total_cols),P(s.num_total_tables-s.num_missing_tables),U(s.num_total_cols-s.num_missing_cols),R([...s.missing_tables]),t(!1),console.log(s)};return(0,i.useEffect)(()=>{let e=localStorage.getItem("defogToken");l(e),t(!0),setTimeout(()=>{checkBasicReadiness()},100)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{}),(0,s.jsxs)(a.Z,{id:"check-readiness",userType:"admin",children:[(0,s.jsx)("h1",{children:"Check readiness"}),(0,s.jsx)("p",{children:"Check if you have added aligned your Defog instance sufficiently"}),(0,s.jsxs)(r.default,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,s.jsxs)(c.default,{span:24,style:{paddingTop:"1em"},children:[(0,s.jsx)("h2",{children:"The Basics"}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(Tooltip,{tooltipText:"Metadata (table names, columns names, column descriptions) updated on Defog?",mainText:"Metadata Updated:"})," ",(0,s.jsx)(d.default,{})," ",e?"⏳":u?"✅":"❌"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(Tooltip,{tooltipText:"Explicit instructions to guide generation added to Defog?",mainText:"Instruction Set Updated:"})," ",(0,s.jsx)(d.default,{})," ",e?"⏳":y?"✅":"❌"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(Tooltip,{tooltipText:"Golden queries to ground the model's generation added to Defog?",mainText:"Golden Queries Updated:"})," ",(0,s.jsx)(d.default,{})," ",e?"⏳":m?"✅":"❌"]})]})]}),(0,s.jsxs)(c.default,{span:24,style:{paddingTop:"1em"},children:[(0,s.jsx)("h2",{children:"Quality Checks"}),(0,s.jsx)("h3",{children:"Check Golden Queries Validity"}),(0,s.jsx)("p",{children:"See if your golden queires can be executed against an empty database with your schema"}),(0,s.jsx)(h(),{type:"primary",onClick:()=>{checkGoldenQueriesValidity()},loading:e,ghost:!0,children:"Check Golden Queries"}),(0,s.jsxs)("p",{children:["Total Golden Queries: ",f]}),(0,s.jsxs)("p",{children:["Valid Golden Queries: ",C]}),(0,s.jsxs)("p",{children:["Invalid Golden Queries: ",S]}),(0,s.jsx)("p",{children:"The following is a list of invalid golden queries:"}),(0,s.jsx)("p",{style:{paddingTop:"1em"},children:D.map((e,t)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Question ",t+1,": ",e.question]}),(0,s.jsx)("p",{children:"SQL"}),(0,s.jsx)("pre",{children:e.sql}),(0,s.jsx)("p",{children:"Error"}),(0,s.jsx)("pre",{children:e.valid_error})]}))}),(0,s.jsx)("h3",{children:"Check Instruction Consistency"}),(0,s.jsx)("p",{children:"See if your instructions are consistent and do not contradict each other"}),(0,s.jsx)(h(),{type:"primary",onClick:()=>{checkInstructionConsistency()},loading:e,ghost:!0,children:"Check Instructions Consistency"}),(0,s.jsx)("p",{children:b}),b&&-1===b.indexOf("Excellent")?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Inconsistent Instructions:"}),(0,s.jsx)("ul",{children:N.map((e,t)=>(0,s.jsx)("li",{children:e},"inconsistent-instruction"+t))}),(0,s.jsx)("p",{children:"Reasons for inconsistency:"}),(0,s.jsx)("ul",{children:I.map((e,t)=>(0,s.jsx)("li",{children:e},"inconsistent-reason-"+t))})]}):null,(0,s.jsx)("h3",{children:"Check Golden Query Coverage"}),(0,s.jsx)("p",{children:"See if your golden queries cover a significant portion of your schema"}),(0,s.jsx)(h(),{type:"primary",onClick:()=>{checkGoldenQueryCoverage()},loading:e,ghost:!0,children:"Check Golden Query Coverage"}),(0,s.jsxs)("p",{children:[L," out of ",E," tables in your database are mentioned in golden queries."]}),(0,s.jsxs)("p",{children:[A," out of ",M," total columns in your database are mentioned in golden queries."]}),(0,s.jsx)("p",{children:"The following tables are missing from the golden queries:"}),(0,s.jsx)("ul",{children:B.map((e,t)=>(0,s.jsx)("li",{children:e},"missing-table-"+t))})]})]})]})]})}},79204:function(e,t){"use strict";t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==t?"ws"===e?"".concat("http://localhost:33364".replace("http","ws"),"/").concat(t):"".concat("http://localhost:33364","/").concat(t):"".concat("http://localhost:33364")}}},function(e){e.O(0,[665,958,664,774,888,179],function(){return e(e.s=65313)}),_N_E=e.O()}]);