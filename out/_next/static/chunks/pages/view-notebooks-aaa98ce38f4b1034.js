(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{84308:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-notebooks",function(){return s(91508)}])},26335:function(e,t,s){"use strict";var a=s(28598),o=s(1887),r=s.n(o);t.Z=()=>(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},82067:function(e,t,s){"use strict";var a=s(28598),o=s(82684),r=s(97574),c=s(79869),i=s(34376);s(12691);var l=s(26978),n=s(47663),d=s(56572);t.Z=e=>{let{id:t,userType:s,children:u,rootClassNames:h="",contentClassNames:m=""}=e,{Content:f,Sider:g}=c.Layout,[p,y]=(0,o.useState)([]),[x,k]=(0,o.useContext)(r.S),v=(0,i.useRouter)(),redirect=e=>{v.push(e)},logout=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),k({user:null,token:null,userType:null}),redirect("/static/log-in.html")},j=(0,n.usePathname)();(0,o.useEffect)(()=>{y(("admin"==s?[{key:"manage-database",title:"Manage Database",href:"/static/extract-metadata.html"},{key:"manage-users",title:"Manage Users",href:"/static/manage-users.html"},{key:"manage-tools",title:"Manage tools",href:"/static/manage-tools.html"},{key:"check-readiness",title:"Check Readiness",href:"/static/check-readiness.html"},{key:"align-model",title:"Align Model",href:"/static/align-model.html"},{key:"view-feedback",title:"View Feedback",href:"/static/view-feedback.html"},{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:s?[{key:"query-data",title:"Query Data",href:"/static/query-data.html"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:logout}]:[]).map(e=>(e.current=e.href==j,e)))},[s]);let[w,_]=(0,o.useState)("flex flex-col md:min-h-screen relative container mx-auto");return(0,o.useEffect)(()=>{"/query-data"===j&&_("flex flex-col md:min-h-screen relative")},[j]),(0,a.jsxs)("div",{className:(0,d.m6)(w,h),children:[p.length?(0,a.jsx)(l.l2,{rootClassNames:"border-b",items:p}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:(0,d.m6)("grow",m),children:u})]})}},91508:function(e,t,s){"use strict";s.r(t);var a=s(28598),o=s(82684),r=s(26335),c=s(54186),i=s(18953),l=s(34376),n=s(79204),d=s(82067),u=s(97574);t.default=()=>{let[e,t]=(0,o.useState)(!1),[s,h]=(0,o.useContext)(u.S),[m,f]=(0,o.useState)([]),[g,p]=(0,o.useState)([]),[y,x]=(0,o.useState)([]),k=(0,l.useRouter)();async function archiveToggle(e){let t=e.doc_id,s=e.archived,a=y,o=m;s?(a=y.filter(e=>e.doc_id!==t),o=[...m,...y.filter(e=>e.doc_id===t).map(e=>(e.archived=!1,e))]):(a=[...y,...m.filter(e=>e.doc_id===t).map(e=>(e.archived=!0,e))],o=m.filter(e=>e.doc_id!==t)),x(a),f(o);let r=await fetch((0,n.Z)("http","toggle_archive_status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_id:t,archive_status:!s})});(r=await r.json()).success&&i.default.success("Successfully ".concat(s?"un":"","archived doc")),r.success||i.default.error("Error ".concat(s?"un":"","archiving doc"))}let getNotebooks=async()=>{if(!s.token)return;let e=await fetch((0,n.Z)("http","get_docs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s.token})});if((e=await e.json()).success){let t=e.docs,a=e.recently_viewed_docs||[];t.forEach(e=>{e.timestamp=new Date(e.timestamp)}),a=a.map(e=>({...e,timestamp:new Date(e.timestamp),created_by:e.username===s.user?"You":e.username})),t.sort((e,t)=>t.timestamp-e.timestamp),p(a),a.sort((e,t)=>t.timestamp-e.timestamp);let o=t.filter(e=>e.archived);t=t.filter(e=>!e.archived),x(o),f(t)}if(!e.success)throw Error(e.error_message);t(!1)};return(0,o.useEffect)(()=>{t(!0);let e=s.token,a=s.userType;if(!a){let t=localStorage.getItem("defogUser");if(e=localStorage.getItem("defogToken"),a=localStorage.getItem("defogUserType"),!t||!e||!a){k.push("/log-in");return}h({user:t,token:e,userType:a})}e?getNotebooks():k.push("/log-in")},[s,s.token]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)(d.Z,{id:"view-notebooks",userType:s.userType,children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Notebooks"}),(0,a.jsx)("h2",{className:"text-lg mb-4",children:"Your notebooks"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-start",children:m&&!e?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{children:"Loading docs..."})}),g.length?(0,a.jsx)("h2",{className:"text-lg mb-4",children:"Recently viewed"}):null,(0,a.jsx)("div",{className:"flex flex-wrap justify-start",children:g&&!e?(0,a.jsx)(a.Fragment,{children:g.map(e=>(0,a.jsx)(DocIcon,{doc:e,onClick:archiveToggle,recentlyViewed:!0},e.doc_id))}):(0,a.jsx)("div",{children:"Loading recently viewed docs..."})}),0===y.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.default,{bordered:!1,size:"small",rootClassName:"archived-collapse",items:[{label:"Archived notebooks",key:"archived-docs",children:(0,a.jsx)("div",{className:"doc-icons-container",children:y.map(e=>(0,a.jsx)(DocIcon,{doc:e,onClick:archiveToggle},e.doc_id))})}]})})]})]})}},79204:function(e,t){"use strict";t.Z=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return(console.log("http://localhost:33364"),""!==t)?"ws"===e?"".concat("http://localhost:33364".replace("http","ws"),"/").concat(t):"".concat("http://localhost:33364","/").concat(t):"".concat("http://localhost:33364")}}},function(e){e.O(0,[435,774,888,179],function(){return e(e.s=84308)}),_N_E=e.O()}]);